(self.webpackChunkelev9_app=self.webpackChunkelev9_app||[]).push([[425],{3425:(e,t,o)=>{"use strict";o.r(t),o.d(t,{ServiceRequestModule:()=>Uo});var s=o(8583),i=o(3423),r=o(3679),n=o(5353),a=o(8117),l=o(1582);class u{constructor(e){e&&(this.id=e.id,this.cityId=e.cityId?e.cityId.toString():null,this.mobileNo=e.mobileNo,this.serviceId=e.serviceId?e.serviceId.toString():null,this.enquiryDate=e.enquiryDate,this.enquiryStatus=e.enquiryStatus?e.enquiryStatus.toString():null,this.currentEnquiryStatus=this.enquiryStatus,this.currentEnquiryStatusValue="",this.serviceGroupId=e.serviceGroupId?e.serviceGroupId.toString():null,this.categoryId=e.categoryId,this.customerId=e.customerId,this.subCategoryId=e.subCategoryId,this.price=e.price,this.preferredDate=e.preferredDate,this.preferredTime=e.preferredTime,this.unattendedReason=e.unattendedReason,this.description=e.description,this.name=e.name,this.emailId=e.emailId,this.streetLocality=e.streetLocality,this.houseNo=e.houseNo,this.landMark=e.landMark,this.blockTower=e.blockTower,this.requestType=e.requestType,this.serviceFor=e.serviceFor?e.serviceFor.toString():null,this.isReadOnce=e.isReadOnce,this.createdBy=e.createdBy,this.priority=e.priority,this.delayReason=e.delayReason,this.stageModifiedOn=e.stageModifiedOn,this.stageModifiedBy=e.stageModifiedBy,this.isReferral=e.isReferral,this.inProgressTime=e.inProgressTime,this.isInProgress=e.isInProgress,this.serviceCardImage=e.serviceCardImage,this.houseAddressImage=e.houseAddressImage,this.meterImage=e.meterImage,this.applianceImage=e.applianceImage,this.feedbackImage=e.feedbackImage,this.serviceName=e.serviceName,this.currentZoneValue="",this.currentClientValue="",this.pressureGuageMake=e.pressureGuageMake,this.pressureGuageMakeNo=e.pressureGuageMakeNo,this.gaugeCalibrationValidityFromDate=e.gaugeCalibrationValidityFromDate,this.gaugeCalibrationValidityFromTo=e.gaugeCalibrationValidityFromTo,this.holdingTime=e.holdingTime,this.isModify=e.isModify)}}(0,n.gn)([(0,a.vg)()],u.prototype,"id",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"cityId",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"mobileNo",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"serviceId",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"enquiryDate",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"enquiryStatus",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"currentEnquiryStatus",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"currentEnquiryStatusValue",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"currentZoneValue",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"currentClientValue",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"serviceGroupId",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"categoryId",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"customerId",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"subCategoryId",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"price",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"preferredDate",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"preferredTime",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"unattendedReason",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"description",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"name",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"emailId",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"streetLocality",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"houseNo",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"landMark",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"blockTower",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"serviceName",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"requestType",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"serviceFor",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"isReadOnce",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"createdBy",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"priority",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"delayReason",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"stageModifiedOn",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"stageModifiedBy",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"isReferral",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"inProgressTime",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"isInProgress",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"serviceCardImage",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"houseAddressImage",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"meterImage",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"applianceImage",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"feedbackImage",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"pressureGuageMake",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"pressureGuageMakeNo",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"gaugeCalibrationValidityFromDate",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"gaugeCalibrationValidityFromTo",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"holdingTime",void 0),(0,n.gn)([(0,a.vg)()],u.prototype,"isModify",void 0);class d{constructor(e){e&&(this.agentID=e.agentID,this.agentUserID=e.agentUserID,this.callDuration=e.callDuration,this.callTime=e.callTime,this.callType=e.callType,this.createdBy=e.createdBy,this.createdName=e.createdName,this.createdOn=e.createdOn,this.enquiryCallDetailID=e.enquiryCallDetailID,this.enquiryID=e.enquiryID,this.isdownloaded=e.isdownloaded,this.phoneNo=e.phoneNo,this.recordingFileName=e.recordingFileName,this.recordingFileTempName=e.recordingFileTempName,this.recordingFileURL=e.recordingFileURL,this.status=e.status,this.description=e.description),this.isDeleted=!1}}(0,n.gn)([(0,a.vg)()],d.prototype,"callTime",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"agentID",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"callType",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"phoneNo",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"callDuration",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"recordingFileURL",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"createdOn",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"agentUserID",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"createdBy",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"createdName",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"enquiryID",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"enquiryCallDetailID",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"isdownloaded",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"recordingFileName",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"recordingFileTempName",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"status",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"description",void 0),(0,n.gn)([(0,a.vg)()],d.prototype,"isDeleted",void 0);class c{constructor(e){e&&(this.activeLocation=e.activeLocation,this.createdBy=e.createdBy,this.createdByName=e.createdByName,this.createdOn=e.createdOn,this.employeeId=e.employeeId,this.employeeName=e.employeeName,this.enquiryId=e.enquiryId,this.id=e.id,this.isActive=e.isActive,this.manpowerLink=e.manpowerLink,this.modifiedBy=e.modifiedBy,this.modifiedOn=e.modifiedOn,this.rowStatus=e.rowStatus,this.status=e.status,this.mobileNo=e.mobileNo,this.companyName=e.companyName,this.serviceName=e.serviceName,this.totalAssignment=e.totalAssignment),this.isDeleted=!1}}(0,n.gn)([(0,a.vg)()],c.prototype,"activeLocation",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"createdBy",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"createdOn",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"employeeId",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"employeeName",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"createdByName",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"enquiryId",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"id",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"isActive",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"manpowerLink",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"modifiedBy",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"modifiedOn",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"rowStatus",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"status",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"isDeleted",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"mobileNo",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"companyName",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"serviceName",void 0),(0,n.gn)([(0,a.vg)()],c.prototype,"totalAssignment",void 0);class g{constructor(e){e&&(this.createdBy=e.createdBy,this.createdName=e.createdName,this.createdOn=e.createdOn,this.employeeId=e.employeeId,this.employeeName=e.employeeName,this.endTime=e.endTime,this.enquiryId=e.enquiryId,this.id=e.id,this.modifiedBy=e.modifiedBy,this.modifiedName=e.modifiedName,this.modifiedOn=e.modifiedOn,this.rowStatus=e.rowStatus,this.startTime=e.startTime,this.status=e.status,this.mobileNo=e.mobileNo),this.isDeleted=!1}}(0,n.gn)([(0,a.vg)()],g.prototype,"createdName",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"createdBy",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"createdOn",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"employeeId",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"employeeName",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"endTime",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"enquiryId",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"id",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"mobileNo",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"modifiedName",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"startTime",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"modifiedBy",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"modifiedOn",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"rowStatus",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"status",void 0),(0,n.gn)([(0,a.vg)()],g.prototype,"isDeleted",void 0);class p{constructor(e){e&&(this.delayReason=e.delayReason,this.delaytime=e.delaytime,this.houseAddressImage=e.houseAddressImage,this.latitude=e.latitude,this.longitude=e.longitude,this.stageModifiedBy=e.stageModifiedBy,this.startTime=e.startTime,this.homeaddress=e.homeaddress),this.isDeleted=!1}}(0,n.gn)([(0,a.vg)()],p.prototype,"delayReason",void 0),(0,n.gn)([(0,a.vg)()],p.prototype,"delaytime",void 0),(0,n.gn)([(0,a.vg)()],p.prototype,"houseAddressImage",void 0),(0,n.gn)([(0,a.vg)()],p.prototype,"latitude",void 0),(0,n.gn)([(0,a.vg)()],p.prototype,"longitude",void 0),(0,n.gn)([(0,a.vg)()],p.prototype,"stageModifiedBy",void 0),(0,n.gn)([(0,a.vg)()],p.prototype,"startTime",void 0),(0,n.gn)([(0,a.vg)()],p.prototype,"isDeleted",void 0),(0,n.gn)([(0,a.vg)()],p.prototype,"homeaddress",void 0);class m{constructor(e){e&&(this.id=e.id,this.enquiryId=e.enquiryId,this.materialId=e.materialId,this.materialName=e.materialName,this.quantity=e.quantity,this.materialAddedOn=e.materialAddedOn,this.entryBy=e.entryBy,this.rowStatus=e.rowStatus,this.subCategoryId=e.subCategoryId,this.subCategoryName=e.subCategoryName,this.entryByName=null==e.entryByName?"N/A":e.entryByName),this.isDeleted=!1}}(0,n.gn)([(0,a.vg)()],m.prototype,"id",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"enquiryId",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"materialId",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"materialName",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"quantity",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"materialAddedOn",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"entryBy",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"rowStatus",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"subCategoryId",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"subCategoryName",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"entryByName",void 0),(0,n.gn)([(0,a.vg)()],m.prototype,"isDeleted",void 0);class h{constructor(){}}(0,n.gn)([(0,a.vg)()],h.prototype,"create",void 0),(0,n.gn)([(0,a.vg)()],h.prototype,"edit",void 0),(0,n.gn)([(0,a.vg)()],h.prototype,"delete",void 0);class v{constructor(e){e&&(this.category=e.category,this.fileName=e.fileName,this.filePath=e.filePath),this.isDeleted=!1}}(0,n.gn)([(0,a.vg)()],v.prototype,"category",void 0),(0,n.gn)([(0,a.vg)()],v.prototype,"fileName",void 0),(0,n.gn)([(0,a.vg)()],v.prototype,"filePath",void 0),(0,n.gn)([(0,a.vg)()],v.prototype,"isDeleted",void 0);class q{constructor(e){e&&(this.id=e.id,this.enquiryId=e.enquiryId,this.materialId=e.materialId,this.materialName=e.materialName,this.quantity=e.quantity,this.materialAddedOn=e.materialAddedOn,this.entryBy=e.entryBy,this.rowStatus=e.rowStatus)}}(0,n.gn)([(0,a.vg)()],q.prototype,"id",void 0),(0,n.gn)([(0,a.vg)()],q.prototype,"enquiryId",void 0),(0,n.gn)([(0,a.vg)()],q.prototype,"materialId",void 0),(0,n.gn)([(0,a.vg)()],q.prototype,"materialName",void 0),(0,n.gn)([(0,a.vg)()],q.prototype,"quantity",void 0),(0,n.gn)([(0,a.vg)()],q.prototype,"materialAddedOn",void 0),(0,n.gn)([(0,a.vg)()],q.prototype,"entryBy",void 0),(0,n.gn)([(0,a.vg)()],q.prototype,"rowStatus",void 0);class Z{constructor(e){this.enquiryTaskLine=new Array,this.enquiryCallDetailList=new Array,this.assignedManpowerList=new Array,this.manpowerTaskTimeList=new Array,this.customerCorrespondenceList=new Array,this.sparesConsumableList=new Array,this.documentList=new Array,this.openingTaskTypePermission=new h,this.spareAndConsumablePermission=new h,this.actualTaskTypePermission=new h,this.assignedManpowerPermission=new h,this.manpowerTaskTimePermission=new h,e?(this.request=new u(e.request),e.enquiryTaskLine&&e.enquiryTaskLine.length>0&&e.enquiryTaskLine.forEach(e=>{e.rowStatus=2,this.enquiryTaskLine.push(new l.T(e))}),e.enquiryCallDetailList&&e.enquiryCallDetailList.length>0&&e.enquiryCallDetailList.forEach(t=>{t.description=e.request.description,this.enquiryCallDetailList.push(new d(t))}),e.sparesConsumableList&&e.sparesConsumableList.length>0&&e.sparesConsumableList.forEach(e=>{this.sparesConsumableList.push(new m(e))}),e.assignedManpowerList&&e.assignedManpowerList.length>0&&e.assignedManpowerList.forEach(t=>{t.mobileNo=e.request.mobileNo,t.serviceName=e.request.serviceName,t.rowStatus=2,this.assignedManpowerList.push(new c(t))}),e.manpowerTaskTimeList&&e.manpowerTaskTimeList.length>0&&e.manpowerTaskTimeList.forEach(t=>{t.mobileNo=e.request.mobileNo,t.rowStatus=2,this.manpowerTaskTimeList.push(new g(t))}),e.customerCorrespondenceList&&e.customerCorrespondenceList.length>0&&e.customerCorrespondenceList.forEach(e=>{this.customerCorrespondenceList.push(new p(e))}),e.documentList&&e.documentList.length>0&&e.documentList.forEach(e=>{this.documentList.push(new v(e))})):this.request=new u}}(0,n.gn)([(0,a.o1)(u)],Z.prototype,"request",void 0),(0,n.gn)([(0,a.IE)(l.T)],Z.prototype,"enquiryTaskLine",void 0),(0,n.gn)([(0,a.IE)(q)],Z.prototype,"sparesConsumable",void 0),(0,n.gn)([(0,a.IE)(d)],Z.prototype,"enquiryCallDetailList",void 0),(0,n.gn)([(0,a.IE)(c)],Z.prototype,"assignedManpowerList",void 0),(0,n.gn)([(0,a.IE)(g)],Z.prototype,"manpowerTaskTimeList",void 0),(0,n.gn)([(0,a.IE)(p)],Z.prototype,"customerCorrespondenceList",void 0),(0,n.gn)([(0,a.IE)(v)],Z.prototype,"documentList",void 0),(0,n.gn)([(0,a.IE)(m)],Z.prototype,"sparesConsumableList",void 0),(0,n.gn)([(0,a.o1)(h)],Z.prototype,"openingTaskTypePermission",void 0),(0,n.gn)([(0,a.o1)(h)],Z.prototype,"spareAndConsumablePermission",void 0),(0,n.gn)([(0,a.o1)(h)],Z.prototype,"actualTaskTypePermission",void 0),(0,n.gn)([(0,a.o1)(h)],Z.prototype,"assignedManpowerPermission",void 0),(0,n.gn)([(0,a.o1)(h)],Z.prototype,"manpowerTaskTimePermission",void 0);var T=o(8227),y=o(2340),f=o(2238);class A{constructor(e){e&&(this.enquiryID=e.enquiryID,this.agentID=e.agentID,this.phoneNo=e.phoneNo,this.status=e.status,this.callType=e.callType,this.callTime=e.callTime,this.Duration=e.Duration,this.recordingFile=e.recordingFile)}}(0,n.gn)([(0,a.vg)()],A.prototype,"enquiryID",void 0),(0,n.gn)([(0,a.vg)()],A.prototype,"agentID",void 0),(0,n.gn)([(0,a.vg)()],A.prototype,"phoneNo",void 0),(0,n.gn)([(0,a.vg)()],A.prototype,"status",void 0),(0,n.gn)([(0,a.vg)()],A.prototype,"callType",void 0),(0,n.gn)([(0,a.vg)()],A.prototype,"callTime",void 0),(0,n.gn)([(0,a.vg)()],A.prototype,"Duration",void 0),(0,n.gn)([(0,a.vg)()],A.prototype,"recordingFile",void 0);var b=o(7716),C=o(3482),w=o(464),I=o(1095),S=o(6352);const F=function(e){return{"is-invalid  ng-dirty":e}};function _(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"form",5),b.TgZ(1,"div",6),b.TgZ(2,"div",7),b.TgZ(3,"div",8),b.TgZ(4,"label"),b._uU(5,"SR Number"),b.TgZ(6,"span",9),b._uU(7,"*"),b.qZA(),b.qZA(),b._UZ(8,"input",10),b.qZA(),b.qZA(),b.TgZ(9,"div",7),b.TgZ(10,"div",8),b.TgZ(11,"label"),b._uU(12,"Agent ID:"),b.TgZ(13,"span",9),b._uU(14,"*"),b.qZA(),b.qZA(),b._UZ(15,"input",11),b.qZA(),b.qZA(),b.qZA(),b.TgZ(16,"div",6),b.TgZ(17,"div",7),b.TgZ(18,"div",8),b.TgZ(19,"label"),b._uU(20,"Phone Number:"),b.TgZ(21,"span",9),b._uU(22,"*"),b.qZA(),b.qZA(),b._UZ(23,"p-inputMask",12),b.qZA(),b.qZA(),b.TgZ(24,"div",7),b.TgZ(25,"div",8),b.TgZ(26,"label"),b._uU(27,"Status:"),b.qZA(),b._UZ(28,"input",13),b.qZA(),b.qZA(),b.qZA(),b.TgZ(29,"div",6),b.TgZ(30,"div",7),b.TgZ(31,"div",8),b.TgZ(32,"label"),b._uU(33,"Call Type:"),b.qZA(),b._UZ(34,"input",14),b.qZA(),b.qZA(),b.TgZ(35,"div",7),b.TgZ(36,"div",8),b.TgZ(37,"label"),b._uU(38,"Call Time:"),b.TgZ(39,"span",9),b._uU(40,"*"),b.qZA(),b.qZA(),b._UZ(41,"input",15),b.qZA(),b.qZA(),b.qZA(),b.TgZ(42,"div",6),b.TgZ(43,"div",7),b.TgZ(44,"div",8),b.TgZ(45,"label"),b._uU(46,"Call Duration:"),b.TgZ(47,"span",9),b._uU(48,"*"),b.qZA(),b.qZA(),b._UZ(49,"p-inputMask",16),b.qZA(),b.qZA(),b.TgZ(50,"div",7),b.TgZ(51,"div",8),b.TgZ(52,"label"),b._uU(53,"Recording File"),b.TgZ(54,"span",9),b._uU(55,"*"),b.qZA(),b.qZA(),b.TgZ(56,"input",17),b.NdJ("change",function(t){return b.CHM(e),b.oxw().handleFileInput(t)}),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()}if(2&e){const e=b.oxw();b.Q6J("formGroup",e.callRecordingUploadForm),b.xp6(8),b.Q6J("ngClass",b.VKq(13,F,e.callRecordingUploadForm.controls.enquiryID.touched&&e.callRecordingUploadForm.controls.enquiryID.errors))("required",!0),b.xp6(7),b.Q6J("ngClass",b.VKq(15,F,e.callRecordingUploadForm.controls.agentID.touched&&e.callRecordingUploadForm.controls.agentID.errors))("required",!0),b.xp6(8),b.Q6J("ngClass",b.VKq(17,F,e.callRecordingUploadForm.controls.phoneNo.touched&&e.callRecordingUploadForm.controls.phoneNo.errors))("required",!0),b.xp6(18),b.Q6J("ngClass",b.VKq(19,F,e.callRecordingUploadForm.controls.callTime.touched&&e.callRecordingUploadForm.controls.callTime.errors))("required",!0),b.xp6(8),b.Q6J("ngClass",b.VKq(21,F,e.callRecordingUploadForm.controls.Duration.touched&&e.callRecordingUploadForm.controls.Duration.errors))("required",!0),b.xp6(7),b.Q6J("ngClass",b.VKq(23,F,e.callRecordingUploadForm.controls.recordingFile.touched&&e.callRecordingUploadForm.controls.recordingFile.errors))("required",!0)}}let M=(()=>{class e{constructor(e,t,o,s,i){this.formBuilder=e,this.service=t,this.authService=o,this.data=s,this.dialogRef=i}ngOnInit(){var e;const t=new A;this.callRecordingUploadForm=this.formBuilder.formGroup(t),null===(e=this.callRecordingUploadForm.get("enquiryID"))||void 0===e||e.disable(),this.callRecordingUploadForm.patchValue({enquiryID:this.data.requestId})}handleFileInput(e){if(console.log(e.target.files[0]),e.target.files[0]){this.fileName=e.target.files[0].name;const t=e.target.files[0],o=new FileReader;o.readAsDataURL(t),o.onload=()=>{this.fileToUpload=o.result,this.fileToUploadarr=this.fileToUpload.split(",")}}else this.fileToUploadarr=[],this.fileToUpload="",this.fileName=""}adCcallRecordingUpload(){const e=this.callRecordingUploadForm.getRawValue();e.recordingFile=this.fileToUploadarr[1],e.recordingFileName=this.fileName,e.createdBy=this.authService.currentUserValue.id.toString(),e.isdownloaded=!1,e.callTime=this.service.Moment(e.callTime).format("yyyy-MM-DDTHH:mm:ss"),console.log(e),this.callRecordingUploadForm.valid?this.service.callRecordingUpload(e).subscribe(e=>{"success"==e.status?(this.service.notify.showSuccess("Call Recording Upload successfully"),this.dialogRef.close()):e.errors.forEach((e,t)=>{console.log(e.errorMessage),this.service.notify.showSuccess(e.errorMessage)})}):(this.callRecordingUploadForm.markAllAsTouched(),this.service.notify.showDefaultError())}cancel(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.GW),b.Y36(C.s),b.Y36(w.e),b.Y36(f.WI),b.Y36(f.so))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-call-recording-upload-signature"]],inputs:{requestId:"requestId",requestForm:"requestForm"},decls:11,vars:1,consts:[[1,"mat-dialog-title"],["class","formWrap",3,"formGroup",4,"ngIf"],[1,"btnWrap"],["mat-button","","color","secondary",3,"click"],["mat-button","","color","primary",3,"click"],[1,"formWrap",3,"formGroup"],[1,"row"],[1,"col-6"],[1,"form-group"],[1,"mandatoryField"],["pInputText","","formControlName","enquiryID","required","",1,"form-control",3,"ngClass","required"],["pInputText","","formControlName","agentID","required","",1,"form-control",3,"ngClass","required"],["mask","9999999999","pInputText","","formControlName","phoneNo",1,"",3,"ngClass","required"],["pInputText","","formControlName","status",1,"form-control"],["pInputText","","formControlName","callType",1,"form-control"],["type","datetime-local","formControlName","callTime",1,"form-control",3,"ngClass","required"],["mask","99:99:99","pInputText","","formControlName","Duration",1,"",3,"ngClass","required"],["type","file","formControlName","recordingFile","required","","accept",".mp3,audio/*","id","file",1,"form-control",3,"ngClass","required","change"]],template:function(e,t){1&e&&(b.TgZ(0,"div"),b.TgZ(1,"div",0),b._uU(2,"Call Details"),b.qZA(),b.TgZ(3,"mat-dialog-content"),b.YNc(4,_,57,25,"form",1),b.qZA(),b.TgZ(5,"mat-dialog-actions"),b.TgZ(6,"div",2),b.TgZ(7,"button",3),b.NdJ("click",function(){return t.cancel()}),b._uU(8,"Cancel"),b.qZA(),b.TgZ(9,"button",4),b.NdJ("click",function(){return t.adCcallRecordingUpload()}),b._uU(10,"Submit"),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(4),b.Q6J("ngIf",t.callRecordingUploadForm))},directives:[f.xY,s.O5,f.H8,I.lW,r._Y,r.JL,a.w5,r.sg,r.Fj,a.x0,a.bf,r.JJ,r.u,r.Q7,s.mk,S.vy,a.Yi,a.A3],styles:[""]}),e})();function x(e,t){if(1&e&&(b.TgZ(0,"div",7),b.TgZ(1,"div",8),b._UZ(2,"img",12),b.qZA(),b.qZA()),2&e){const e=b.oxw(2);b.xp6(2),b.Q6J("src",e.fileToUpload,b.LSH)}}const U=function(e){return{"is-invalid  ng-dirty":e}};function N(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"form",5),b.TgZ(1,"div",6),b.TgZ(2,"div",7),b.TgZ(3,"div",8),b.TgZ(4,"label"),b._uU(5,"Customer Signature File"),b.TgZ(6,"span",9),b._uU(7,"*"),b.qZA(),b.qZA(),b.TgZ(8,"input",10),b.NdJ("change",function(t){return b.CHM(e),b.oxw().handleFileInput(t)}),b.qZA(),b.qZA(),b.qZA(),b.YNc(9,x,3,1,"div",11),b.qZA(),b.qZA()}if(2&e){const e=b.oxw();b.Q6J("formGroup",e.UploadCustomerSignatureForm),b.xp6(8),b.Q6J("ngClass",b.VKq(4,U,e.UploadCustomerSignatureForm.controls.signature.touched&&e.UploadCustomerSignatureForm.controls.signature.errors))("required",!0),b.xp6(1),b.Q6J("ngIf",e.fileToUpload)}}let k=(()=>{class e{constructor(e,t,o,s,i,r){this.formBuilder=e,this.service=t,this.authService=o,this.fb=s,this.data=i,this.dialogRef=r}ngOnInit(){this.UploadCustomerSignatureForm=this.fb.group({signature:[""]})}handleFileInput(e){if(console.log(e.target),e.target.files[0]){const t=e.target.files[0],o=new FileReader;o.readAsDataURL(t),o.onload=e=>{this.fileToUpload=o.result,this.fileToUploadarr=this.fileToUpload.split(",")}}else this.fileToUpload="",this.fileToUploadarr=[]}addTaskType(){if(this.fileToUpload){let e={enquiryId:this.data.requestId,uploadedBy:this.authService.currentUserValue.id,signature:this.fileToUploadarr[1]};console.log(e),this.service.uploadCustomerSignature(e).subscribe(e=>{"success"==e.status?(this.service.notify.showSuccess("Customer Signature Upload successfully"),this.dialogRef.close()):e.errors.forEach((e,t)=>{console.log(e.errorMessage),this.service.notify.showSuccess(e.errorMessage)})})}else this.service.notify.showDefaultError()}cancel(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.GW),b.Y36(C.s),b.Y36(w.e),b.Y36(r.qu),b.Y36(f.WI),b.Y36(f.so))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-upload-customer-signature"]],inputs:{requestId:"requestId",requestForm:"requestForm"},decls:11,vars:1,consts:[[1,"mat-dialog-title"],["class","formWrap",3,"formGroup",4,"ngIf"],[1,"btnWrap"],["mat-button","","color","secondary",3,"click"],["mat-button","","color","primary",3,"click"],[1,"formWrap",3,"formGroup"],[1,"row"],[1,"col-6"],[1,"form-group"],[1,"mandatoryField"],["type","file","formControlName","signature","required","","accept","image/png, image/gif, image/jpeg","id","file",1,"form-control",3,"ngClass","required","change"],["class","col-6",4,"ngIf"],["height","150","width","200px",2,"margin","3px",3,"src"]],template:function(e,t){1&e&&(b.TgZ(0,"div"),b.TgZ(1,"div",0),b._uU(2,"Customer Signature Upload"),b.qZA(),b.TgZ(3,"mat-dialog-content"),b.YNc(4,N,10,6,"form",1),b.qZA(),b.TgZ(5,"mat-dialog-actions"),b.TgZ(6,"div",2),b.TgZ(7,"button",3),b.NdJ("click",function(){return t.cancel()}),b._uU(8,"Cancel"),b.qZA(),b.TgZ(9,"button",4),b.NdJ("click",function(){return t.addTaskType()}),b._uU(10,"Submit"),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(4),b.Q6J("ngIf",t.UploadCustomerSignatureForm))},directives:[f.xY,s.O5,f.H8,I.lW,r._Y,r.JL,a.w5,r.sg,a.Yi,a.A3,r.Fj,a.x0,a.bf,r.JJ,r.u,r.Q7,s.mk],styles:[""]}),e})(),D=(()=>{class e{constructor(e,t,o,s){this.formBuilder=e,this.service=t,this.data=o,this.dialogRef=s,this.apiUrl=y.N.apiUrl,this.clientAddressDetail={},this.clientMaster={}}ngOnInit(){this.initialize(),console.log(this.data.customerId),this.service.getCustomer({enquiryId:this.data.requestId,customerId:null}).subscribe(e=>{"success"==e.status&&(console.log("response.data"),console.log(e.data),e.data&&(console.log("response.data "),console.log(e.data.clientAddressDetail),this.clientAddressDetail=e.data.clientAddressDetail,this.clientMaster=e.data.clientMaster))})}viewImage(){}initialize(){}cancel(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.GW),b.Y36(C.s),b.Y36(f.WI),b.Y36(f.so))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-view-customer-details"]],inputs:{requestId:"requestId",requestForm:"requestForm"},decls:247,vars:34,consts:[[1,"formWrap"],[1,"mat-dialog-title"],[1,"row"],[1,"col-md-6"],[1,"col-md-4"],[1,"col-md-8"],[1,"btnWrap"],["mat-stroked-button","","color","secondary",3,"click"]],template:function(e,t){1&e&&(b.TgZ(0,"div",0),b.TgZ(1,"div",1),b._uU(2,"Customer Details"),b.qZA(),b.TgZ(3,"mat-dialog-content"),b.TgZ(4,"div",2),b.TgZ(5,"div",3),b.TgZ(6,"div",2),b.TgZ(7,"div",4),b.TgZ(8,"strong"),b._uU(9,"First Name:"),b.qZA(),b.qZA(),b.TgZ(10,"div",5),b._uU(11),b.qZA(),b.qZA(),b.qZA(),b.TgZ(12,"div",3),b.TgZ(13,"div",2),b.TgZ(14,"div",4),b.TgZ(15,"strong"),b._uU(16,"Last Name:"),b.qZA(),b.qZA(),b.TgZ(17,"div",5),b._uU(18),b.qZA(),b.qZA(),b.qZA(),b.TgZ(19,"div",3),b.TgZ(20,"div",2),b.TgZ(21,"div",4),b.TgZ(22,"strong"),b._uU(23,"Mobile:"),b.qZA(),b.qZA(),b.TgZ(24,"div",5),b._uU(25),b.qZA(),b.qZA(),b.qZA(),b.TgZ(26,"div",3),b.TgZ(27,"div",2),b.TgZ(28,"div",4),b.TgZ(29,"strong"),b._uU(30,"Alt.Number:"),b.qZA(),b.qZA(),b.TgZ(31,"div",5),b._uU(32),b.qZA(),b.qZA(),b.qZA(),b.TgZ(33,"div",3),b.TgZ(34,"div",2),b.TgZ(35,"div",4),b.TgZ(36,"strong"),b._uU(37,"Email ID:"),b.qZA(),b.qZA(),b.TgZ(38,"div",5),b._uU(39),b.qZA(),b.qZA(),b.qZA(),b.TgZ(40,"div",3),b.TgZ(41,"div",2),b.TgZ(42,"div",4),b.TgZ(43,"strong"),b._uU(44,"Country:"),b.qZA(),b.qZA(),b.TgZ(45,"div",5),b._uU(46),b.qZA(),b.qZA(),b.qZA(),b.TgZ(47,"div",3),b.TgZ(48,"div",2),b.TgZ(49,"div",4),b.TgZ(50,"strong"),b._uU(51,"State:"),b.qZA(),b.qZA(),b.TgZ(52,"div",5),b._uU(53),b.qZA(),b.qZA(),b.qZA(),b.TgZ(54,"div",3),b.TgZ(55,"div",2),b.TgZ(56,"div",4),b.TgZ(57,"strong"),b._uU(58,"City:"),b.qZA(),b.qZA(),b.TgZ(59,"div",5),b._uU(60),b.qZA(),b.qZA(),b.qZA(),b.TgZ(61,"div",3),b.TgZ(62,"div",2),b.TgZ(63,"div",4),b.TgZ(64,"strong"),b._uU(65,"Area:"),b.qZA(),b.qZA(),b.TgZ(66,"div",5),b._uU(67),b.qZA(),b.qZA(),b.qZA(),b.TgZ(68,"div",3),b.TgZ(69,"div",2),b.TgZ(70,"div",4),b.TgZ(71,"strong"),b._uU(72,"Society:"),b.qZA(),b.qZA(),b.TgZ(73,"div",5),b._uU(74),b.qZA(),b.qZA(),b.qZA(),b.TgZ(75,"div",3),b.TgZ(76,"div",2),b.TgZ(77,"div",4),b.TgZ(78,"strong"),b._uU(79,"Block/Tower:"),b.qZA(),b.qZA(),b.TgZ(80,"div",5),b._uU(81),b.qZA(),b.qZA(),b.qZA(),b.TgZ(82,"div",3),b.TgZ(83,"div",2),b.TgZ(84,"div",4),b.TgZ(85,"strong"),b._uU(86,"House No:"),b.qZA(),b.qZA(),b.TgZ(87,"div",5),b._uU(88),b.qZA(),b.qZA(),b.qZA(),b.TgZ(89,"div",3),b.TgZ(90,"div",2),b.TgZ(91,"div",4),b.TgZ(92,"strong"),b._uU(93,"Floor:"),b.qZA(),b.qZA(),b.TgZ(94,"div",5),b._uU(95),b.qZA(),b.qZA(),b.qZA(),b.TgZ(96,"div",3),b.TgZ(97,"div",2),b.TgZ(98,"div",4),b.TgZ(99,"strong"),b._uU(100,"Landmark:"),b.qZA(),b.qZA(),b.TgZ(101,"div",5),b._uU(102),b.qZA(),b.qZA(),b.qZA(),b.TgZ(103,"div",3),b.TgZ(104,"div",2),b.TgZ(105,"div",4),b.TgZ(106,"strong"),b._uU(107,"Pin Code:"),b.qZA(),b.qZA(),b.TgZ(108,"div",5),b._uU(109),b.qZA(),b.qZA(),b.qZA(),b.TgZ(110,"div",3),b.TgZ(111,"div",2),b.TgZ(112,"div",4),b.TgZ(113,"strong"),b._uU(114,"Control Room:"),b.qZA(),b.qZA(),b.TgZ(115,"div",5),b._uU(116),b.qZA(),b.qZA(),b.qZA(),b.TgZ(117,"div",3),b.TgZ(118,"div",2),b.TgZ(119,"div",4),b.TgZ(120,"strong"),b._uU(121,"Zone:"),b.qZA(),b.qZA(),b.TgZ(122,"div",5),b._uU(123),b.qZA(),b.qZA(),b.qZA(),b.TgZ(124,"div",3),b.TgZ(125,"div",2),b.TgZ(126,"div",4),b.TgZ(127,"strong"),b._uU(128,"RZone:"),b.qZA(),b.qZA(),b.TgZ(129,"div",5),b._uU(130),b.qZA(),b.qZA(),b.qZA(),b.TgZ(131,"div",3),b.TgZ(132,"div",2),b.TgZ(133,"div",4),b.TgZ(134,"strong"),b._uU(135,"Type Of Customer:"),b.qZA(),b.qZA(),b.TgZ(136,"div",5),b._uU(137),b.qZA(),b.qZA(),b.qZA(),b.TgZ(138,"div",3),b.TgZ(139,"div",2),b.TgZ(140,"div",4),b.TgZ(141,"strong"),b._uU(142,"Account Creation Date:"),b.qZA(),b.qZA(),b.TgZ(143,"div",5),b._uU(144),b.qZA(),b.qZA(),b.qZA(),b.TgZ(145,"div",3),b.TgZ(146,"div",2),b.TgZ(147,"div",4),b.TgZ(148,"strong"),b._uU(149,"Installation Date:"),b.qZA(),b.qZA(),b.TgZ(150,"div",5),b._uU(151),b.qZA(),b.qZA(),b.qZA(),b.TgZ(152,"div",3),b.TgZ(153,"div",2),b.TgZ(154,"div",4),b.TgZ(155,"strong"),b._uU(156,"Installed By:"),b.qZA(),b.qZA(),b.TgZ(157,"div",5),b._uU(158),b.qZA(),b.qZA(),b.qZA(),b.TgZ(159,"div",3),b.TgZ(160,"div",2),b.TgZ(161,"div",4),b.TgZ(162,"strong"),b._uU(163,"Gas Status:"),b.qZA(),b.qZA(),b.TgZ(164,"div",5),b._uU(165),b.qZA(),b.qZA(),b.qZA(),b.TgZ(166,"div",3),b.TgZ(167,"div",2),b.TgZ(168,"div",4),b.TgZ(169,"strong"),b._uU(170,"Customer ID:"),b.qZA(),b.qZA(),b.TgZ(171,"div",5),b._uU(172),b.qZA(),b.qZA(),b.qZA(),b.TgZ(173,"div",3),b.TgZ(174,"div",2),b.TgZ(175,"div",4),b.TgZ(176,"strong"),b._uU(177,"CA No:"),b.qZA(),b.qZA(),b.TgZ(178,"div",5),b._uU(179),b.qZA(),b.qZA(),b.qZA(),b.TgZ(180,"div",3),b.TgZ(181,"div",2),b.TgZ(182,"div",4),b.TgZ(183,"strong"),b._uU(184,"Meter Type:"),b.qZA(),b.qZA(),b.TgZ(185,"div",5),b._uU(186),b.qZA(),b.qZA(),b.qZA(),b.TgZ(187,"div",3),b.TgZ(188,"div",2),b.TgZ(189,"div",4),b.TgZ(190,"strong"),b._uU(191,"Meter No:"),b.qZA(),b.qZA(),b.TgZ(192,"div",5),b._uU(193),b.qZA(),b.qZA(),b.qZA(),b.TgZ(194,"div",3),b.TgZ(195,"div",2),b.TgZ(196,"div",4),b.TgZ(197,"strong"),b._uU(198,"RFC Reading:"),b.qZA(),b.qZA(),b.TgZ(199,"div",5),b._uU(200),b.qZA(),b.qZA(),b.qZA(),b.TgZ(201,"div",3),b.TgZ(202,"div",2),b.TgZ(203,"div",4),b.TgZ(204,"strong"),b._uU(205,"Regulator No.:"),b.qZA(),b.qZA(),b.TgZ(206,"div",5),b._uU(207),b.qZA(),b.qZA(),b.qZA(),b.TgZ(208,"div",3),b.TgZ(209,"div",2),b.TgZ(210,"div",4),b.TgZ(211,"strong"),b._uU(212,"Meter Make:"),b.qZA(),b.qZA(),b.TgZ(213,"div",5),b._uU(214),b.qZA(),b.qZA(),b.qZA(),b.TgZ(215,"div",3),b.TgZ(216,"div",2),b.TgZ(217,"div",4),b.TgZ(218,"strong"),b._uU(219,"Gas Start Date:"),b.qZA(),b.qZA(),b.TgZ(220,"div",5),b._uU(221),b.qZA(),b.qZA(),b.qZA(),b.TgZ(222,"div",3),b.TgZ(223,"div",2),b.TgZ(224,"div",4),b.TgZ(225,"strong"),b._uU(226,"JMR Card No:"),b.qZA(),b.qZA(),b.TgZ(227,"div",5),b._uU(228),b.qZA(),b.qZA(),b.qZA(),b.TgZ(229,"div",3),b.TgZ(230,"div",2),b.TgZ(231,"div",4),b.TgZ(232,"strong"),b._uU(233,"JMR Reading:"),b.qZA(),b.qZA(),b.TgZ(234,"div",5),b._uU(235),b.qZA(),b.qZA(),b.qZA(),b.TgZ(236,"div",3),b.TgZ(237,"div",2),b.TgZ(238,"div",4),b.TgZ(239,"strong"),b._uU(240,"Burner Details:"),b.qZA(),b.qZA(),b.TgZ(241,"div",5),b._uU(242),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(243,"mat-dialog-actions"),b.TgZ(244,"div",6),b.TgZ(245,"button",7),b.NdJ("click",function(){return t.cancel()}),b._uU(246,"Cancel"),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(11),b.hij(" ",t.clientMaster.firstName," "),b.xp6(7),b.hij(" ",t.clientMaster.lastName," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.mobile," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.contactNo," "),b.xp6(7),b.hij(" ",t.clientMaster.emailId," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.country," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.state," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.city," "),b.xp6(7),b.hij(" ",t.clientMaster.area," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.landMark," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.blockTower," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.houseNo," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.streetLocality," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.landMark," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.pinCode," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.locality," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.localityGroup," "),b.xp6(7),b.hij(" ",t.clientMaster.rZoneName," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.homeCategory," "),b.xp6(7),b.hij(" ",null!=t.clientMaster.accountCreationDate?t.service.Moment(t.clientMaster.accountCreationDate).format("MM-DD-YYYY"):""," "),b.xp6(7),b.hij(" ",null!=t.clientMaster.installationDate?t.service.Moment(t.clientMaster.installationDate).format("MM-DD-YYYY"):""," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.companyName," "),b.xp6(7),b.hij(" ",t.clientAddressDetail.plan," "),b.xp6(7),b.hij(" ",t.clientMaster.customerId," "),b.xp6(7),b.hij(" ",t.clientMaster.caNo," "),b.xp6(7),b.hij(" ",t.clientMaster.meterType," "),b.xp6(7),b.hij(" ",t.clientMaster.meterNo," "),b.xp6(7),b.hij(" ",t.clientMaster.rfcReading," "),b.xp6(7),b.hij(" ",t.clientMaster.regulatorno," "),b.xp6(7),b.hij(" ",t.clientMaster.meterMake," "),b.xp6(7),b.hij(" ",null!=t.clientMaster.gasStartDate?t.service.Moment(t.clientMaster.gasStartDate).format("MM-DD-YYYY"):""," "),b.xp6(7),b.hij(" ",t.clientMaster.jmrNo," "),b.xp6(7),b.hij(" ",t.clientMaster.initialReading," "),b.xp6(7),b.hij(" ",t.clientMaster.burnerDetails," "))},directives:[f.xY,f.H8,I.lW],styles:[".formWrap[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding:10px}"]}),e})();var P=o(5719),R=o(3013);function O(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"tr",9),b.TgZ(1,"th",10),b._uU(2," Category "),b._UZ(3,"p-sortIcon",11),b.qZA(),b.TgZ(4,"th",12),b._uU(5," File "),b._UZ(6,"p-sortIcon",13),b.qZA(),b.TgZ(7,"th",14),b.TgZ(8,"a",15),b.NdJ("click",function(){return b.CHM(e),b.oxw().viewImageAll()}),b._uU(9,"Download All"),b.qZA(),b.qZA(),b.qZA()}}function V(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"img",19),b.NdJ("click",function(){b.CHM(e);const t=b.oxw(2).$implicit;return b.oxw().viewImage(t.fileName)}),b.qZA()}if(2&e){const e=b.oxw(2).$implicit;b.Q6J("src",e.filePath,b.LSH)}}function Y(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"img",20),b.NdJ("click",function(){b.CHM(e);const t=b.oxw(2).$implicit;return b.oxw().viewImage(t.fileName)}),b.qZA()}}function J(e,t){if(1&e&&(b.TgZ(0,"tr",9),b.TgZ(1,"td"),b._uU(2),b.qZA(),b.TgZ(3,"td"),b._uU(4),b.qZA(),b.TgZ(5,"td"),b.YNc(6,V,1,1,"img",17),b.YNc(7,Y,1,0,"img",18),b.qZA(),b.qZA()),2&e){const e=b.oxw().$implicit;b.xp6(2),b.Oqu(e.category),b.xp6(2),b.Oqu(e.fileName),b.xp6(2),b.Q6J("ngIf",null!=e.fileName&&0==e.formet),b.xp6(1),b.Q6J("ngIf",null!=e.fileName&&e.formet)}}function L(e,t){1&e&&b.YNc(0,J,8,4,"tr",16),2&e&&b.Q6J("ngIf",!t.$implicit.isDeleted)}function Q(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",21),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}function E(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"div"),b.TgZ(1,"button",22),b.NdJ("click",function(){return b.CHM(e),b.oxw().showIsometricUploadButton()}),b._uU(2,"Upload Isometric Graph Image"),b.qZA(),b.qZA()}}function B(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"div",23),b.TgZ(1,"form",24),b.NdJ("ngSubmit",function(){return b.CHM(e),b.oxw().saveNotes()}),b.TgZ(2,"div",25),b.TgZ(3,"div",26),b.TgZ(4,"div",27),b.TgZ(5,"label"),b.TgZ(6,"b"),b._uU(7," Upload Isometric Graph Image :"),b.qZA(),b.qZA(),b.TgZ(8,"div",28),b.TgZ(9,"input",29),b.NdJ("change",function(t){return b.CHM(e),b.oxw().onFileSelected(t)}),b.qZA(),b.TgZ(10,"button",30),b._uU(11,"Upload"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()}}let G=(()=>{class e{constructor(e,t,o,s){this.formBuilder=e,this.service=t,this.data=o,this.dialogRef=s,this.apiUrl=y.N.apiUrl,this.UploadButton=!1,this.showButton=!1,this.showButtonOFImageUpload=!1,this.SRNumber=this.data.SRNumber}ngOnInit(){this.documentList=this.data.documentList,this.SRNumber=this.data.SRNumber,console.log("this is a SRNUmber",this.SRNumber),this.documentList.forEach(e=>{let t=e.fileName.split(".");e.formet="pdf"==t[1]}),this.addForm=new r.cw({file:new r.NI(null,r.kI.required)});const e=JSON.parse(localStorage.getItem("currentUser")||"{}");console.log("this is a roleid",e.roleID),9!=e.roleID&&2!=e.roleID||(this.UploadButton=!0,this.showButtonOFImageUpload=!0)}viewImageAll(){this.service.ServiceDocs(this.data.requestId).subscribe(e=>{this.blob=new Blob([e],{type:"application/zip"});var t=window.URL.createObjectURL(this.blob),o=document.createElement("a");o.href=t,o.download="AllDocuments",o.click()},e=>{this.service.notify.showError("File Not Found")})}saveNotes(){let e={SRNumber:this.SRNumber,ImageData:this.addForm.value.file,FileExtension:this.imgName};console.log(e),this.service.UploadImageOfIsometricGraph(e).subscribe(e=>{"success"==e.status&&this.service.notify.showError("Image upload successfully."),this.dialogRef.close()})}showIsometricUploadButton(){console.log("this is a clicked"),this.UploadButton=!1,this.showButton=!0}onFileSelected(e){const t=e.target.files,o=t[0].name.split(".").pop();if(this.imgName=o,console.log("this is a ectension",this.imgName),t.length>0){const e=t[0],o=new FileReader;o.onload=()=>{const e=o.result.toString().split(",")[1];this.addForm.patchValue({file:e}),this.addForm.patchValue({ImageName:this.imgName})},o.readAsDataURL(e)}}viewImage(e){this.service.viewImage(this.data.requestId,e).subscribe(t=>{console.log(t),this.blob=new Blob([t],{type:"application/jpg"});var o=window.URL.createObjectURL(this.blob),s=document.createElement("a");s.href=o,s.download=e,s.click()},e=>{this.service.notify.showError("File Not Found")})}cancel(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.GW),b.Y36(C.s),b.Y36(f.WI),b.Y36(f.so))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-view-image"]],inputs:{requestId:"requestId",requestForm:"requestForm"},decls:15,vars:6,consts:[[1,"mat-dialog-title"],["dataKey","id",1,"pTable",3,"value","paginator","alwaysShowPaginator","totalRecords"],["openingTaskDetails",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[4,"ngIf"],["class","mt-2",4,"ngIf"],["mat-stroked-button","","color","secondary",3,"click"],[1,"searchTr"],["id","header","pSortableColumn","Category"],["field","Category"],["id","header","pSortableColumn","File"],["field","File"],["id","header"],[2,"color","#0a86dc","cursor","pointer",3,"click"],["class","searchTr",4,"ngIf"],["style"," height: 50px; width: 50px;cursor: pointer;",3,"src","click",4,"ngIf"],["src","assets/images/pdf.jpg","style"," height: 50px; width: 50px;cursor: pointer;",3,"click",4,"ngIf"],[2,"height","50px","width","50px","cursor","pointer",3,"src","click"],["src","assets/images/pdf.jpg",2,"height","50px","width","50px","cursor","pointer",3,"click"],["colspan","3"],["type","submit","mat-button","","color","primary",3,"click"],[1,"mt-2"],[1,"formWrap",3,"ngSubmit"],[1,"row"],[1,"col-12"],[1,"form-group","mt-2"],[1,"input-group","mb-3","col-12","text-center"],["type","file","formControlName","files",1,"form-control","col-8",3,"change"],["type","submit","mat-button","","color","primary"]],template:function(e,t){1&e&&(b.TgZ(0,"div"),b.TgZ(1,"div",0),b._uU(2,"View Documents"),b.qZA(),b.TgZ(3,"mat-dialog-content"),b.TgZ(4,"p-table",1,2),b.YNc(6,O,10,0,"ng-template",3),b.YNc(7,L,1,1,"ng-template",4),b.YNc(8,Q,3,0,"ng-template",5),b.qZA(),b.YNc(9,E,3,0,"div",6),b.YNc(10,B,12,0,"div",7),b.qZA(),b.qZA(),b.TgZ(11,"mat-dialog-actions"),b.TgZ(12,"div"),b.TgZ(13,"button",8),b.NdJ("click",function(){return t.cancel()}),b._uU(14,"Cancel"),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(4),b.Q6J("value",t.documentList)("paginator",!1)("alwaysShowPaginator",!1)("totalRecords",t.documentList.length),b.xp6(5),b.Q6J("ngIf",t.UploadButton),b.xp6(1),b.Q6J("ngIf",t.showButton))},directives:[f.xY,P.iA,R.jx,s.O5,f.H8,I.lW,P.lQ,P.fz,r._Y,r.JL,r.F,a.Yi,a.A3,r.Fj,a.x0,a.bf,r.JJ,r.u],styles:["tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:400px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:80px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:120px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:60px}"]}),e})();var j=o(5121),H=o(3935),W=o(6627),z=o(5939),$=o(3738),K=o(9241),X=o(103),ee=o(8295);function te(e,t){1&e&&(b.TgZ(0,"div",4),b.TgZ(1,"label"),b._uU(2,"Visit Remarks"),b.qZA(),b.TgZ(3,"textarea",20,21),b._uU(5,"                "),b.qZA(),b.qZA())}function oe(e,t){if(1&e&&(b.TgZ(0,"div",24),b.TgZ(1,"div"),b._uU(2),b.qZA(),b.qZA()),2&e){const e=t.$implicit;b.xp6(2),b.Oqu(e.displayText)}}function se(e,t){if(1&e&&(b.TgZ(0,"div",2),b.TgZ(1,"div",3),b.TgZ(2,"div",4),b.TgZ(3,"label"),b._uU(4,"Completed By : "),b.qZA(),b.TgZ(5,"p-dropdown",22),b.YNc(6,oe,3,1,"ng-template",23),b.qZA(),b.qZA(),b.qZA(),b.qZA()),2&e){const e=b.oxw(2);b.xp6(5),b.Q6J("filter",!0)("options",e.employeeNames)("placeholder",e.completedByname)}}function ie(e,t){1&e&&(b.TgZ(0,"div",2),b.TgZ(1,"div",3),b.TgZ(2,"div",4),b.TgZ(3,"label"),b._uU(4,"Pressure Gauge Make"),b.qZA(),b._UZ(5,"input",25),b.qZA(),b.qZA(),b.TgZ(6,"div",3),b.TgZ(7,"div",4),b.TgZ(8,"label"),b._uU(9,"Pressure Gauge No"),b.qZA(),b._UZ(10,"input",26),b.qZA(),b.qZA(),b.qZA())}function re(e,t){1&e&&(b.TgZ(0,"div",2),b.TgZ(1,"div",3),b.TgZ(2,"div",4),b.TgZ(3,"label"),b._uU(4,"Gauge calibration validity From "),b.qZA(),b._UZ(5,"input",27),b.qZA(),b.qZA(),b.TgZ(6,"div",3),b.TgZ(7,"div",4),b.TgZ(8,"label"),b._uU(9,"Gauge calibration validity To "),b.qZA(),b._UZ(10,"input",28),b.qZA(),b.qZA(),b.TgZ(11,"div",3),b.TgZ(12,"div",4),b.TgZ(13,"label"),b._uU(14,"Holding Time "),b.qZA(),b._UZ(15,"input",29),b.qZA(),b.qZA(),b.qZA())}const ne=function(e){return{"is-invalid":e}};function ae(e,t){if(1&e&&(b.TgZ(0,"mat-card-content",1),b.TgZ(1,"div",2),b.TgZ(2,"div",3),b.TgZ(3,"div",4),b.TgZ(4,"label"),b._uU(5,"Service Group"),b.qZA(),b._UZ(6,"p-dropdown",5),b.qZA(),b.qZA(),b.TgZ(7,"div",3),b.TgZ(8,"div",4),b.TgZ(9,"label"),b._uU(10,"Service Name"),b.qZA(),b._UZ(11,"p-dropdown",6),b.qZA(),b.qZA(),b.TgZ(12,"div",3),b.TgZ(13,"div",4),b.TgZ(14,"label"),b._uU(15,"Mobile"),b.qZA(),b._UZ(16,"p-inputMask",7),b.qZA(),b.qZA(),b.qZA(),b.TgZ(17,"div",2),b.TgZ(18,"div",3),b.TgZ(19,"div",4),b.TgZ(20,"label"),b._uU(21,"Created Date"),b.qZA(),b._UZ(22,"input",8),b.ALo(23,"date"),b.qZA(),b.qZA(),b.TgZ(24,"div",3),b.TgZ(25,"div",4),b.TgZ(26,"label"),b._uU(27,"Zone"),b.TgZ(28,"span",9),b._uU(29,"*"),b.qZA(),b.qZA(),b._UZ(30,"p-dropdown",10),b.qZA(),b.qZA(),b.TgZ(31,"div",3),b.TgZ(32,"div",4),b.TgZ(33,"label"),b._uU(34,"Preferred Date"),b.TgZ(35,"span",9),b._uU(36,"*"),b.qZA(),b.qZA(),b._UZ(37,"input",11),b.ALo(38,"date"),b.qZA(),b.qZA(),b.TgZ(39,"div",3),b.TgZ(40,"div",4),b.TgZ(41,"label"),b._uU(42,"Preferred Time"),b.qZA(),b._UZ(43,"p-dropdown",12),b.qZA(),b.qZA(),b.qZA(),b.TgZ(44,"div",2),b.TgZ(45,"div",3),b.TgZ(46,"div",4),b.TgZ(47,"label"),b._uU(48,"Service Status"),b.TgZ(49,"span",9),b._uU(50,"*"),b.qZA(),b.qZA(),b._UZ(51,"p-dropdown",13),b.qZA(),b.qZA(),b.TgZ(52,"div",3),b.YNc(53,te,6,0,"div",14),b.qZA(),b.TgZ(54,"div",3),b.TgZ(55,"div",4),b.TgZ(56,"label"),b._uU(57,"Priority"),b.qZA(),b._UZ(58,"p-dropdown",15),b.qZA(),b.qZA(),b.qZA(),b._UZ(59,"div",2),b.YNc(60,se,7,3,"div",16),b.TgZ(61,"div",2),b.TgZ(62,"div",17),b.TgZ(63,"div",4),b.TgZ(64,"label"),b._uU(65,"Calling Remarks"),b.qZA(),b.TgZ(66,"textarea",18,19),b._uU(68,"                "),b.qZA(),b.TgZ(69,"mat-hint"),b._uU(70),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.YNc(71,ie,11,0,"div",16),b.YNc(72,re,16,0,"div",16),b.qZA()),2&e){const e=b.MAs(67),t=b.oxw();let o,s;b.Q6J("formGroup",t.RequestDetail),b.xp6(6),b.Q6J("options",t.serviceGroups),b.xp6(5),b.Q6J("options",t.serviceNames),b.xp6(11),b.s9C("value",b.xi3(23,18,null==(o=t.RequestDetail.get("enquiryDate"))?null:o.value,"dd-MM-yyyy")),b.xp6(8),b.Q6J("options",t.zones)("ngClass",b.VKq(24,ne,t.RequestDetail.controls.cityId.touched&&t.RequestDetail.controls.cityId.errors))("required",!0),b.xp6(7),b.s9C("value",b.xi3(38,21,null==(s=t.RequestDetail.get("preferredDate"))?null:s.value,"yyyy-MM-dd")),b.xp6(6),b.Q6J("options",t.preferredTimes),b.xp6(8),b.Q6J("options",t.serviceStatuses)("ngClass",b.VKq(26,ne,t.RequestDetail.controls.enquiryStatus.touched&&t.RequestDetail.controls.enquiryStatus.errors))("required",!0),b.xp6(2),b.Q6J("ngIf",t.replytype),b.xp6(5),b.Q6J("options",t.priorities),b.xp6(2),b.Q6J("ngIf",t.ShowCompetedBy),b.xp6(10),b.hij("(",e.value.length||0,"/70)"),b.xp6(1),b.Q6J("ngIf",t.MDPEDisabled),b.xp6(1),b.Q6J("ngIf",t.MDPEDisabled)}}let le=(()=>{class e{constructor(e){this.service=e,this.preferredDateDisabled=!0,this.MDPEDisabled=!1,this.ShowCompetedBy=!1,this.employeeNames=[]}ngOnInit(){var e,t,o,s,i,r,n,a,l,u,d,c,g,p,m,h,v;null===(e=this.requestForm.controls.request.get("preferredDate"))||void 0===e||e.setValue(null!=(null===(t=this.requestForm.controls.request.get("preferredDate"))||void 0===t?void 0:t.value)?this.service.Moment(null===(o=this.requestForm.controls.request.get("preferredDate"))||void 0===o?void 0:o.value).format("YYYY-MM-DD"):null),null===(s=this.requestForm.controls.request.get("enquiryDate"))||void 0===s||s.setValue(null!=(null===(i=this.requestForm.controls.request.get("enquiryDate"))||void 0===i?void 0:i.value)?this.service.Moment(null===(r=this.requestForm.controls.request.get("enquiryDate"))||void 0===r?void 0:r.value).format("YYYY-MM-DD"):null),null===(n=this.requestForm.controls.request.get("gaugeCalibrationValidityFromDate"))||void 0===n||n.setValue(null!=(null===(a=this.requestForm.controls.request.get("gaugeCalibrationValidityFromDate"))||void 0===a?void 0:a.value)?this.service.Moment(null===(l=this.requestForm.controls.request.get("gaugeCalibrationValidityFromDate"))||void 0===l?void 0:l.value).format("YYYY-MM-DD"):null),null===(u=this.requestForm.controls.request.get("gaugeCalibrationValidityFromTo"))||void 0===u||u.setValue(null!=(null===(d=this.requestForm.controls.request.get("gaugeCalibrationValidityFromTo"))||void 0===d?void 0:d.value)?this.service.Moment(null===(c=this.requestForm.controls.request.get("gaugeCalibrationValidityFromTo"))||void 0===c?void 0:c.value).format("YYYY-MM-DD"):null),this.employeeName=null===(g=this.requestForm.controls.request.get("currentZoneId"))||void 0===g?void 0:g.value,console.log(this.obj),console.log("this.requestForm.controls.request.get"),console.log(null===(p=this.requestForm.controls.request.get("serviceId"))||void 0===p?void 0:p.value),7==(null===(m=this.requestForm.controls.request.get("serviceId"))||void 0===m?void 0:m.value)&&(this.MDPEDisabled=!0),this.bindDropdowns(),this.replytype=3==(null===(h=this.requestForm.controls.request.get("enquiryStatus"))||void 0===h?void 0:h.value)||4==(null===(v=this.requestForm.controls.request.get("enquiryStatus"))||void 0===v?void 0:v.value),this.disableFields(),this.setEnquiryStatusPermissions(),this.detectValueChanges()}detectValueChanges(){var e,t;null===(e=this.RequestDetail.get("enquiryStatus"))||void 0===e||e.valueChanges.subscribe(e=>{console.log(e),this.setEnquiryStatusPermissions(),this.setReplyTypeValue()}),null===(t=this.RequestDetail.get("stageModifiedBy"))||void 0===t||t.valueChanges.subscribe(e=>{var t;null===(t=this.requestForm.controls.request.get("isModify"))||void 0===t||t.setValue(1)})}bindDropdowns(){var e,t,o,s,i;console.log(this.lookups),this.zones=this.lookups[this.service.constants.MasterCategories.ZoneMaster],this.serviceGroups=this.lookups[this.service.constants.MasterCategories.ServiceGroup],this.serviceNames=this.lookups[this.service.constants.MasterCategories.ServiceMaster];const r=this.lookups[this.service.constants.MasterCategories.ServiceStageMaster];this.clients=this.lookups[this.service.constants.MasterCategories.ServiceForMaster],this.preferredTimes=this.lookups[this.service.constants.LookupCategories.PreferredTime],this.priorities=this.lookups[this.service.constants.LookupCategories.ServicePriority],this.completedBy=[],console.log("this is a obj",this.obj),console.log(null===(e=this.requestForm.controls.request.get("currentZoneValue"))||void 0===e?void 0:e.value);const n={userTypeId:2,zoneId:parseInt(this.obj.zoneId)};console.log("this is a req",n),this.service.GetEmployeeListByZoneIdAndTypeId(n).subscribe(e=>{if(console.log(e.data[0].displayText),this.employeeList=e.data,this.employeeNames=[],e.data.forEach((e,t)=>{this.employeeNames.push({displayText:e.displayText,keyName:parseInt(e.keyName)})}),"21"==this.obj.request.enquiryStatus||21==this.obj.request.enquiryStatus){let e=this.obj.request.stageModifiedBy;var t=!1;if(this.obj.assignedManpowerList.forEach(o=>{console.log("this is a manPower",e),console.log(o.employeeId),o.employeeId==e&&(this.completedByname=o.employeeName,t=!0)}),0==this.ShowCompetedBy){var o=this.employeeNames.find(t=>t.keyName==e);this.completedByname=null==o?void 0:o.displayText,t=null!=o}t||(this.completedByname=this.obj.request.stageModifyname),console.log(this.completedByname),this.ShowCompetedBy=!0}}),this.serviceStatuses=this.service.getStatusDropdownValues(null===(t=this.RequestDetail.get("currentEnquiryStatus"))||void 0===t?void 0:t.value,r,null===(o=this.requestForm.controls.request.get("serviceId"))||void 0===o?void 0:o.value),this.serviceStatuses.findIndex(e=>"27"==e.keyName)&&this.serviceStatuses.splice(this.serviceStatuses.findIndex(e=>"27"==e.keyName),1),5!=(null===(s=this.RequestDetail.get("currentEnquiryStatus"))||void 0===s?void 0:s.value)&&6!=(null===(i=this.RequestDetail.get("currentEnquiryStatus"))||void 0===i?void 0:i.value)||(this.preferredDateDisabled=!1)}get RequestDetail(){return this.requestForm.controls.request}setReplyTypeValue(){var e,t,o,s;this.replytype=3==(null===(e=this.requestForm.controls.request.get("enquiryStatus"))||void 0===e?void 0:e.value)||4==(null===(t=this.requestForm.controls.request.get("enquiryStatus"))||void 0===t?void 0:t.value),console.log(null===(o=this.requestForm.controls.request.get("enquiryStatus"))||void 0===o?void 0:o.value),console.log(null===(s=this.requestForm.controls.request.get("enquiryStatus"))||void 0===s?void 0:s.value)}disableFields(){var e,t,o,s,i,r;(null===(e=this.RequestDetail.get("currentEnquiryStatus"))||void 0===e?void 0:e.value)===this.service.constants.ServiceStages.Closed?this.requestForm.disable():(null===(t=this.RequestDetail.get("mobileNo"))||void 0===t||t.disable(),null===(o=this.RequestDetail.get("serviceGroupId"))||void 0===o||o.disable(),null===(s=this.RequestDetail.get("serviceId"))||void 0===s||s.disable(),null===(i=this.RequestDetail.get("enquiryDate"))||void 0===i||i.disable(),null===(r=this.RequestDetail.get("serviceFor"))||void 0===r||r.disable())}setEnquiryStatusPermissions(){var e,t,o,s,i,r,n,a,l,u,d,c,g,p,m,h,v,q,Z,T,y,f,A,b,C,w,I,S,F,_,M,x,U,N,k,D,P,R,O,V,Y,J,L,Q,E,B,G,j,H,W,z,$,K,X,ee,te,oe,se,ie,re,ne,ae,le,ue,de,ce,ge,pe,me,he,ve,qe,Ze,Te,ye,fe,Ae,be,Ce,we,Ie,Se,Fe,_e,Me,xe,Ue,Ne,ke,De,Pe,Re,Oe,Ve,Ye,Je,Le,Qe,Ee,Be,Ge,je,He,We,ze,$e,Ke,Xe,et,tt,ot,st,it,rt,nt,at,lt,ut,dt,ct,gt,pt,mt,ht,vt,qt,Zt,Tt,yt,ft,At,bt,Ct,wt,It,St,Ft,_t,Mt;const xt=null===(e=this.RequestDetail.get("enquiryStatus"))||void 0===e?void 0:e.value,Ut=JSON.parse(localStorage.getItem("currentUser")||"{}");switch(xt){case this.service.constants.ServiceStages.WaitingForApproval:case this.service.constants.ServiceStages.InQueue:null===(t=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===t||t.setValue(!1),null===(o=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===o||o.setValue(!1),null===(s=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===s||s.setValue(!1),null===(i=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===i||i.setValue(!0),null===(r=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===r||r.setValue(!0),null===(n=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===n||n.setValue(!0),null===(a=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===a||a.setValue(!1),null===(l=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===l||l.setValue(!1),null===(u=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===u||u.setValue(!1),null===(d=this.requestForm.controls.assignedManpowerPermission.get("create"))||void 0===d||d.setValue(!1),null===(c=this.requestForm.controls.assignedManpowerPermission.get("edit"))||void 0===c||c.setValue(!1),null===(g=this.requestForm.controls.assignedManpowerPermission.get("delete"))||void 0===g||g.setValue(!1),null===(p=this.requestForm.controls.manpowerTaskTimePermission.get("create"))||void 0===p||p.setValue(!1),null===(m=this.requestForm.controls.manpowerTaskTimePermission.get("edit"))||void 0===m||m.setValue(!1),null===(h=this.requestForm.controls.manpowerTaskTimePermission.get("delete"))||void 0===h||h.setValue(!1);break;case this.service.constants.ServiceStages.Assigned:9==Ut.roleID||3==Ut.roleID||2==Ut.roleID||4==Ut.roleID?(null===(v=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===v||v.setValue(!1),null===(q=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===q||q.setValue(!1),null===(Z=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===Z||Z.setValue(!1),null===(T=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===T||T.setValue(!0),null===(y=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===y||y.setValue(!0),null===(f=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===f||f.setValue(!0),null===(A=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===A||A.setValue(!1),null===(b=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===b||b.setValue(!1),null===(C=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===C||C.setValue(!1),(null===(w=this.requestForm.get("manpowerTaskTimeList"))||void 0===w?void 0:w.value.length)>0?null===(I=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===I||I.setValue(!0):null===(S=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===S||S.setValue(!0)):(null===(F=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===F||F.setValue(!1),null===(_=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===_||_.setValue(!1),null===(M=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===M||M.setValue(!1),null===(x=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===x||x.setValue(!1),null===(U=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===U||U.setValue(!1),null===(N=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===N||N.setValue(!1),null===(k=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===k||k.setValue(!1),null===(D=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===D||D.setValue(!1),null===(P=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===P||P.setValue(!1)),null===(R=this.requestForm.controls.assignedManpowerPermission.get("create"))||void 0===R||R.setValue(!0),null===(O=this.requestForm.controls.assignedManpowerPermission.get("edit"))||void 0===O||O.setValue(!0),null===(V=this.requestForm.controls.assignedManpowerPermission.get("delete"))||void 0===V||V.setValue(!0),null===(Y=this.requestForm.controls.manpowerTaskTimePermission.get("create"))||void 0===Y||Y.setValue(!0),null===(J=this.requestForm.controls.manpowerTaskTimePermission.get("edit"))||void 0===J||J.setValue(!0),null===(L=this.requestForm.controls.manpowerTaskTimePermission.get("delete"))||void 0===L||L.setValue(!0);break;case this.service.constants.ServiceStages.InProgress:9==Ut.roleID||3==Ut.roleID||2==Ut.roleID||4==Ut.roleID?(null===(Q=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===Q||Q.setValue(!1),null===(E=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===E||E.setValue(!1),null===(B=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===B||B.setValue(!1),null===(G=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===G||G.setValue(!0),null===(j=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===j||j.setValue(!0),null===(H=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===H||H.setValue(!0),null===(W=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===W||W.setValue(!1),null===(z=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===z||z.setValue(!1),null===($=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===$||$.setValue(!1)):(null===(K=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===K||K.setValue(!1),null===(X=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===X||X.setValue(!1),null===(ee=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===ee||ee.setValue(!1),null===(te=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===te||te.setValue(!1),null===(oe=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===oe||oe.setValue(!1),null===(se=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===se||se.setValue(!1),null===(ie=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===ie||ie.setValue(!1),null===(re=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===re||re.setValue(!1),null===(ne=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===ne||ne.setValue(!1)),null===(ae=this.requestForm.controls.assignedManpowerPermission.get("create"))||void 0===ae||ae.setValue(!1),null===(le=this.requestForm.controls.assignedManpowerPermission.get("edit"))||void 0===le||le.setValue(!0),null===(ue=this.requestForm.controls.assignedManpowerPermission.get("delete"))||void 0===ue||ue.setValue(!0),null===(de=this.requestForm.controls.manpowerTaskTimePermission.get("create"))||void 0===de||de.setValue(!0),null===(ce=this.requestForm.controls.manpowerTaskTimePermission.get("edit"))||void 0===ce||ce.setValue(!0),null===(ge=this.requestForm.controls.manpowerTaskTimePermission.get("delete"))||void 0===ge||ge.setValue(!0);break;case this.service.constants.ServiceStages.Delay:9==Ut.roleID||3==Ut.roleID||2==Ut.roleID||4==Ut.roleID?(null===(pe=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===pe||pe.setValue(!1),null===(me=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===me||me.setValue(!1),null===(he=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===he||he.setValue(!1),null===(ve=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===ve||ve.setValue(!0),null===(qe=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===qe||qe.setValue(!0),null===(Ze=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===Ze||Ze.setValue(!0),null===(Te=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===Te||Te.setValue(!1),null===(ye=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===ye||ye.setValue(!1),null===(fe=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===fe||fe.setValue(!1)):(null===(Ae=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===Ae||Ae.setValue(!1),null===(be=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===be||be.setValue(!1),null===(Ce=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===Ce||Ce.setValue(!1),null===(we=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===we||we.setValue(!1),null===(Ie=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===Ie||Ie.setValue(!1),null===(Se=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===Se||Se.setValue(!1),null===(Fe=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===Fe||Fe.setValue(!1),null===(_e=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===_e||_e.setValue(!1),null===(Me=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===Me||Me.setValue(!1)),null===(xe=this.requestForm.controls.assignedManpowerPermission.get("create"))||void 0===xe||xe.setValue(!1),null===(Ue=this.requestForm.controls.assignedManpowerPermission.get("edit"))||void 0===Ue||Ue.setValue(!1),null===(Ne=this.requestForm.controls.assignedManpowerPermission.get("delete"))||void 0===Ne||Ne.setValue(!0),null===(ke=this.requestForm.controls.manpowerTaskTimePermission.get("create"))||void 0===ke||ke.setValue(!1),null===(De=this.requestForm.controls.manpowerTaskTimePermission.get("edit"))||void 0===De||De.setValue(!1),null===(Pe=this.requestForm.controls.manpowerTaskTimePermission.get("delete"))||void 0===Pe||Pe.setValue(!1);break;case this.service.constants.ServiceStages.Completed:9==Ut.roleID||3==Ut.roleID||2==Ut.roleID||4==Ut.roleID?(null===(Re=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===Re||Re.setValue(!1),null===(Oe=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===Oe||Oe.setValue(!1),null===(Ve=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===Ve||Ve.setValue(!1),null===(Ye=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===Ye||Ye.setValue(!0),null===(Je=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===Je||Je.setValue(!0),null===(Le=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===Le||Le.setValue(!0),null===(Qe=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===Qe||Qe.setValue(!1),null===(Ee=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===Ee||Ee.setValue(!1),null===(Be=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===Be||Be.setValue(!1)):(null===(Ge=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===Ge||Ge.setValue(!1),null===(je=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===je||je.setValue(!1),null===(He=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===He||He.setValue(!1),null===(We=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===We||We.setValue(!1),null===(ze=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===ze||ze.setValue(!1),null===($e=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===$e||$e.setValue(!1),null===(Ke=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===Ke||Ke.setValue(!1),null===(Xe=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===Xe||Xe.setValue(!1),null===(et=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===et||et.setValue(!1)),null===(tt=this.requestForm.controls.assignedManpowerPermission.get("create"))||void 0===tt||tt.setValue(!1),null===(ot=this.requestForm.controls.assignedManpowerPermission.get("edit"))||void 0===ot||ot.setValue(!1),null===(st=this.requestForm.controls.assignedManpowerPermission.get("delete"))||void 0===st||st.setValue(!1),null===(it=this.requestForm.controls.manpowerTaskTimePermission.get("create"))||void 0===it||it.setValue(!0),null===(rt=this.requestForm.controls.manpowerTaskTimePermission.get("edit"))||void 0===rt||rt.setValue(!0),null===(nt=this.requestForm.controls.manpowerTaskTimePermission.get("delete"))||void 0===nt||nt.setValue(!0);break;case this.service.constants.ServiceStages.Closed:9==Ut.roleID||3==Ut.roleID||2==Ut.roleID||4==Ut.roleID?(null===(at=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===at||at.setValue(!1),null===(lt=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===lt||lt.setValue(!1),null===(ut=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===ut||ut.setValue(!1),null===(dt=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===dt||dt.setValue(!1),null===(ct=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===ct||ct.setValue(!1),null===(gt=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===gt||gt.setValue(!1),null===(pt=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===pt||pt.setValue(!1),null===(mt=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===mt||mt.setValue(!1),null===(ht=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===ht||ht.setValue(!1)):(null===(vt=this.requestForm.controls.openingTaskTypePermission.get("create"))||void 0===vt||vt.setValue(!1),null===(qt=this.requestForm.controls.openingTaskTypePermission.get("edit"))||void 0===qt||qt.setValue(!1),null===(Zt=this.requestForm.controls.openingTaskTypePermission.get("delete"))||void 0===Zt||Zt.setValue(!1),null===(Tt=this.requestForm.controls.spareAndConsumablePermission.get("create"))||void 0===Tt||Tt.setValue(!1),null===(yt=this.requestForm.controls.spareAndConsumablePermission.get("edit"))||void 0===yt||yt.setValue(!1),null===(ft=this.requestForm.controls.spareAndConsumablePermission.get("delete"))||void 0===ft||ft.setValue(!1),null===(At=this.requestForm.controls.actualTaskTypePermission.get("create"))||void 0===At||At.setValue(!1),null===(bt=this.requestForm.controls.actualTaskTypePermission.get("edit"))||void 0===bt||bt.setValue(!1),null===(Ct=this.requestForm.controls.actualTaskTypePermission.get("delete"))||void 0===Ct||Ct.setValue(!1)),null===(wt=this.requestForm.controls.assignedManpowerPermission.get("create"))||void 0===wt||wt.setValue(!1),null===(It=this.requestForm.controls.assignedManpowerPermission.get("edit"))||void 0===It||It.setValue(!1),null===(St=this.requestForm.controls.assignedManpowerPermission.get("delete"))||void 0===St||St.setValue(!1),null===(Ft=this.requestForm.controls.manpowerTaskTimePermission.get("create"))||void 0===Ft||Ft.setValue(!1),null===(_t=this.requestForm.controls.manpowerTaskTimePermission.get("edit"))||void 0===_t||_t.setValue(!1),null===(Mt=this.requestForm.controls.manpowerTaskTimePermission.get("delete"))||void 0===Mt||Mt.setValue(!1)}}saveCompletedBy(e){}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(K.r))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-request-detail"]],inputs:{requestId:"requestId",requestForm:"requestForm",lookups:"lookups",obj:"obj"},decls:1,vars:1,consts:[["class","formWrap",3,"formGroup",4,"ngIf"],[1,"formWrap",3,"formGroup"],[1,"row"],[1,"col-4"],[1,"form-group"],["optionValue","keyName","formControlName","serviceGroupId","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options"],["optionValue","keyName","formControlName","serviceId","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options"],["mask","999-999-9999","formControlName","mobileNo"],["type","date","formControlName","enquiryDate","name","enquiryDate","id","enquiryDate",1,"form-control",3,"value"],[1,"mandatoryField"],["optionValue","keyName","formControlName","cityId","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options","ngClass","required"],["type","date","formControlName","preferredDate",1,"form-control",3,"value"],["optionValue","keyName","formControlName","preferredTime","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options"],["optionValue","keyName","formControlName","enquiryStatus","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options","ngClass","required"],["class","form-group",4,"ngIf"],["optionValue","keyName","formControlName","priority","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options"],["class","row",4,"ngIf"],[1,"col-12"],["pInputText","","formControlName","description","maxlength","70",1,"form-control"],["description",""],["pInputText","","formControlName","delayReason","required","","maxlength","70"],["delayReason",""],["appendTo","body","formControlName","stageModifiedBy","optionValue","keyName","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"filter","options","placeholder"],["pTemplate","item"],[1,"country-item"],["pInputText","","formControlName","pressureGuageMake",1,"form-control"],["pInputText","","formControlName","pressureGuageMakeNo",1,"form-control"],["type","date","formControlName","gaugeCalibrationValidityFromDate",1,"form-control"],["type","date","formControlName","gaugeCalibrationValidityFromTo",1,"form-control"],["type","time","formControlName","holdingTime",1,"form-control"]],template:function(e,t){1&e&&b.YNc(0,ae,73,28,"mat-card-content",0),2&e&&b.Q6J("ngIf",t.RequestDetail)},directives:[s.O5,$.dn,a.w5,r.JL,r.sg,X.Lt,a.x0,a.bf,r.JJ,r.u,S.vy,r.Fj,s.mk,r.Q7,r.nD,ee.bx,R.jx],pipes:[s.uU],styles:[""]}),e})();var ue=o(9288),de=o(1841);const ce=function(e){return{"is-invalid  ng-dirty":e}};function ge(e,t){if(1&e&&(b.TgZ(0,"form",5),b.TgZ(1,"div",6),b.TgZ(2,"div",7),b.TgZ(3,"div",8),b.TgZ(4,"label"),b._uU(5,"Item Name"),b.qZA(),b._UZ(6,"p-dropdown",9),b.qZA(),b.qZA(),b.TgZ(7,"div",7),b.TgZ(8,"div",8),b.TgZ(9,"label"),b._uU(10,"Service Sub Category"),b.qZA(),b._UZ(11,"p-dropdown",10),b.qZA(),b.qZA(),b.TgZ(12,"div",7),b.TgZ(13,"div",8),b.TgZ(14,"label"),b._uU(15,"Quantity"),b.qZA(),b._UZ(16,"input",11),b.qZA(),b.qZA(),b.qZA(),b.TgZ(17,"div"),b.TgZ(18,"p",12),b._uU(19),b.qZA(),b.qZA(),b.qZA()),2&e){const e=b.oxw();b.Q6J("formGroup",e.sparesConsumablesForm),b.xp6(6),b.Q6J("options",e.materialMaster)("filter",!0)("ngClass",b.VKq(9,ce,e.sparesConsumablesForm.controls.id.touched&&e.sparesConsumablesForm.controls.id.errors))("required",!0),b.xp6(5),b.Q6J("options",e.serviceSubCategories),b.xp6(5),b.Q6J("ngClass",b.VKq(11,ce,e.sparesConsumablesForm.controls.quantity.touched&&e.sparesConsumablesForm.controls.quantity.errors))("required",!0),b.xp6(3),b.Oqu(e.errorMsg)}}let pe=(()=>{class e{constructor(e,t,o,s,i,r){this.formBuilder=e,this.service=t,this.service1=o,this.data=s,this.dialogRef=i,this.http=r}ngOnInit(){this.http.get("../../../../../../assets/materialIds.json").subscribe(e=>{this.materialIds=e.materialIds}),this.bindDropdowns(),this.initialize()}bindDropdowns(){this.serviceSubCategories=this.data.enquiryTaskLines.arrayObject,this.service1.getMaterials().subscribe(e=>{"success"===e.status&&e.data&&(this.materialMaster=e.data)})}initialize(){var e;const t=new m;this.sparesConsumablesForm=this.formBuilder.formGroup(t),this.detectValueChanges(),null===(e=this.sparesConsumablesForm.get("unit"))||void 0===e||e.disable()}detectValueChanges(){this.sparesConsumablesForm.controls.itemCode.valueChanges.subscribe(e=>{var t;this.filteredSubCategories=e?this.materialMaster.filter(t=>t.id===e.id):new Array,console.log(this.filteredSubCategories),null===(t=this.sparesConsumablesForm.get("quantity"))||void 0===t||t.setValue("")})}addSparesConsumables(){var e,t;if(this.sparesConsumablesForm.valid){const o=this.sparesConsumablesForm.getRawValue();o.itemName=o.id.materialName,o.itemCode=o.id.id,o.quantity=o.quantity,o.materialId=o.id.id,o.materialName=o.id.materialName,o.subCategoryName=null===(e=o.subCategoryId)||void 0===e?void 0:e.subCategory,o.subCategoryId=null===(t=o.subCategoryId)||void 0===t?void 0:t.subCategoryId,o.requestedDate=new Date,o.materialAddedOn=new Date;const s=JSON.parse(localStorage.getItem("currentUser")||"{}");o.entryBy=s.id,o.rowStatus=1,o.status=1,o.isActive=!1,console.log(this.materialIds),console.log(o.materialId),console.log(this.materialIds.indexOf(o.materialId)),-1!==this.materialIds.indexOf(o.materialId)&&null==o.subCategoryName?this.errorMsg="Service Sub Category is required":this.dialogRef.close(o)}else this.sparesConsumablesForm.markAllAsTouched(),this.service.notify.showDefaultError()}cancel(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.GW),b.Y36(ue.i),b.Y36(C.s),b.Y36(f.WI),b.Y36(f.so),b.Y36(de.eN))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-spares-consumables"]],decls:10,vars:1,consts:[[1,"mat-dialog-title"],["class","formWrap",3,"formGroup",4,"ngIf"],[1,"btnWrap"],["mat-button","","color","secondary",3,"click"],["mat-button","","color","primary",3,"click"],[1,"formWrap",3,"formGroup"],[1,"row"],[1,"col-6"],[1,"form-group"],["appendTo","body","filterBy","materialName","formControlName","id","optionLabel","materialName","placeholder","-Select-",1,"ui-input",3,"options","filter","ngClass","required"],["appendTo","body","formControlName","subCategoryId","optionLabel","subCategory","placeholder","-Select-",1,"ui-input",3,"options"],["pInputText","","formControlName","quantity","required","",1,"form-control",3,"ngClass","required"],[2,"color","red"]],template:function(e,t){1&e&&(b.TgZ(0,"div",0),b._uU(1,"Add Spares & Consumables"),b.qZA(),b.TgZ(2,"mat-dialog-content"),b.YNc(3,ge,20,13,"form",1),b.qZA(),b.TgZ(4,"mat-dialog-actions"),b.TgZ(5,"div",2),b.TgZ(6,"button",3),b.NdJ("click",function(){return t.cancel()}),b._uU(7,"Cancel"),b.qZA(),b.TgZ(8,"button",4),b.NdJ("click",function(){return t.addSparesConsumables()}),b._uU(9,"Submit"),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(3),b.Q6J("ngIf",t.sparesConsumablesForm))},directives:[f.xY,s.O5,f.H8,I.lW,r._Y,r.JL,a.w5,r.sg,X.Lt,a.x0,a.bf,r.JJ,r.u,s.mk,r.Q7,r.Fj],styles:[""]}),e})();var me=o(1844),he=o(4207);function ve(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"th",13),b._uU(2," Material Id "),b._UZ(3,"p-sortIcon",14),b.qZA(),b.TgZ(4,"th",15),b._uU(5," Material Name "),b._UZ(6,"p-sortIcon",16),b.qZA(),b.TgZ(7,"th",17),b._uU(8," SubCategory Name "),b._UZ(9,"p-sortIcon",18),b.qZA(),b.TgZ(10,"th",19),b._uU(11," Qty. "),b._UZ(12,"p-sortIcon",20),b.qZA(),b.TgZ(13,"th",21),b._uU(14," Material AddedOn "),b._UZ(15,"p-sortIcon",22),b.qZA(),b.TgZ(16,"th",23),b._uU(17," CreatedBy "),b.qZA(),b.TgZ(18,"th",23),b._uU(19," Action "),b.qZA(),b.qZA())}function qe(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"mat-icon",26),b.NdJ("click",function(){b.CHM(e);const t=b.oxw(2).rowIndex;return b.oxw(2).deleteSparesConsumables(t)}),b._uU(1,"delete"),b.qZA()}}function Ze(e,t){if(1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td"),b._uU(2),b.qZA(),b.TgZ(3,"td"),b._uU(4),b.qZA(),b.TgZ(5,"td"),b._uU(6),b.qZA(),b.TgZ(7,"td"),b._uU(8),b.qZA(),b.TgZ(9,"td"),b._uU(10),b.qZA(),b.TgZ(11,"td"),b._uU(12),b.qZA(),b.TgZ(13,"td"),b.YNc(14,qe,2,0,"mat-icon",25),b.qZA(),b.qZA()),2&e){const e=b.oxw().$implicit,t=b.oxw(2);let o;b.xp6(2),b.Oqu(e.materialId),b.xp6(2),b.Oqu(e.materialName),b.xp6(2),b.Oqu(e.subCategoryName),b.xp6(2),b.hij("",e.quantity," "),b.xp6(2),b.Oqu(null==e.materialAddedOn?"":t.service.Moment(e.materialAddedOn).format("MM-DD-YYYY h:mm a")),b.xp6(2),b.Oqu(e.entryByName),b.xp6(2),b.Q6J("ngIf",null==(o=t.requestForm.controls.spareAndConsumablePermission.get("delete"))?null:o.value)}}function Te(e,t){1&e&&b.YNc(0,Ze,15,7,"tr",24),2&e&&b.Q6J("ngIf",!t.$implicit.isDeleted)}function ye(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",27),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}function fe(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"th",28),b._uU(2," Service Category "),b._UZ(3,"p-sortIcon",29),b.qZA(),b.TgZ(4,"th",30),b._uU(5," Service Sub Category "),b._UZ(6,"p-sortIcon",31),b.qZA(),b.TgZ(7,"th",19),b._uU(8," Quantity "),b._UZ(9,"p-sortIcon",20),b.qZA(),b.TgZ(10,"th",32),b._uU(11," Amount "),b._UZ(12,"p-sortIcon",33),b.qZA(),b.TgZ(13,"th",23),b._uU(14," Action "),b.qZA(),b.qZA())}function Ae(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"td"),b.TgZ(1,"input",34),b.NdJ("change",function(t){b.CHM(e);const o=b.oxw(2).rowIndex;return b.oxw(2).OpeningTask_quantity(o,t,1)}),b.qZA(),b.qZA()}if(2&e){const e=b.oxw(2).$implicit;b.xp6(1),b.Q6J("value",e.quantity)}}function be(e,t){if(1&e&&(b.TgZ(0,"td"),b._uU(1),b.qZA()),2&e){const e=b.oxw(2).$implicit;b.xp6(1),b.hij(" ",e.quantity," ")}}function Ce(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"mat-icon",26),b.NdJ("click",function(){b.CHM(e);const t=b.oxw(2).rowIndex;return b.oxw(2).deleteTaskType(t)}),b._uU(1,"delete "),b.qZA()}}function we(e,t){if(1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td"),b._uU(2),b.qZA(),b.TgZ(3,"td"),b._uU(4),b.qZA(),b.YNc(5,Ae,2,1,"td",24),b.YNc(6,be,2,1,"td",24),b.TgZ(7,"td"),b._uU(8),b.qZA(),b.TgZ(9,"td"),b.YNc(10,Ce,2,0,"mat-icon",25),b.qZA(),b.qZA()),2&e){const e=b.oxw().$implicit,t=b.oxw(2);let o,s,i;b.xp6(2),b.Oqu(e.category),b.xp6(2),b.Oqu(e.subCategory),b.xp6(1),b.Q6J("ngIf",null==(o=t.requestForm.controls.openingTaskTypePermission.get("edit"))?null:o.value),b.xp6(1),b.Q6J("ngIf",!(null!=(s=t.requestForm.controls.openingTaskTypePermission.get("edit"))&&s.value)),b.xp6(2),b.hij("",e.price," "),b.xp6(2),b.Q6J("ngIf",null==(i=t.requestForm.controls.openingTaskTypePermission.get("delete"))?null:i.value)}}function Ie(e,t){if(1&e&&b.YNc(0,we,11,6,"tr",24),2&e){const e=t.$implicit;b.Q6J("ngIf",!e.isDeleted&&1==e.taskType)}}function Se(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",35),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}function Fe(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"th",28),b._uU(2," Service Category "),b._UZ(3,"p-sortIcon",29),b.qZA(),b.TgZ(4,"th",30),b._uU(5," Service Sub Category "),b._UZ(6,"p-sortIcon",31),b.qZA(),b.TgZ(7,"th",36),b._uU(8," Actual Quantity "),b._UZ(9,"p-sortIcon",37),b.qZA(),b.TgZ(10,"th",38),b._uU(11," Actual Price "),b._UZ(12,"p-sortIcon",39),b.qZA(),b.TgZ(13,"th",23),b._uU(14," Action "),b.qZA(),b.qZA())}function _e(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"td"),b.TgZ(1,"input",34),b.NdJ("change",function(t){b.CHM(e);const o=b.oxw(2).rowIndex;return b.oxw(2).OpeningTask_quantity(o,t,3)}),b.qZA(),b.qZA()}if(2&e){const e=b.oxw(2).$implicit;b.xp6(1),b.Q6J("value",e.actualQuantity)}}function Me(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"td"),b.TgZ(1,"input",34),b.NdJ("change",function(t){b.CHM(e);const o=b.oxw(2).rowIndex;return b.oxw(2).OpeningTask_quantity(o,t,4)}),b.qZA(),b.qZA()}if(2&e){const e=b.oxw(2).$implicit;b.xp6(1),b.Q6J("value",e.actualPrice)}}function xe(e,t){if(1&e&&(b.TgZ(0,"td"),b._uU(1),b.qZA()),2&e){const e=b.oxw(2).$implicit;b.xp6(1),b.hij(" ",e.actualQuantity," ")}}function Ue(e,t){if(1&e&&(b.TgZ(0,"td"),b._uU(1),b.qZA()),2&e){const e=b.oxw(2).$implicit;b.xp6(1),b.hij(" ",e.actualPrice," ")}}function Ne(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"mat-icon",26),b.NdJ("click",function(){b.CHM(e);const t=b.oxw(2).rowIndex;return b.oxw(2).deleteTaskType(t)}),b._uU(1,"delete "),b.qZA()}}function ke(e,t){if(1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td"),b._uU(2),b.qZA(),b.TgZ(3,"td"),b._uU(4),b.qZA(),b.YNc(5,_e,2,1,"td",24),b.YNc(6,Me,2,1,"td",24),b.YNc(7,xe,2,1,"td",24),b.YNc(8,Ue,2,1,"td",24),b.TgZ(9,"td"),b.YNc(10,Ne,2,0,"mat-icon",25),b.qZA(),b.qZA()),2&e){const e=b.oxw().$implicit,t=b.oxw(2);let o,s,i,r,n;b.xp6(2),b.Oqu(e.category),b.xp6(2),b.Oqu(e.subCategory),b.xp6(1),b.Q6J("ngIf",null==(o=t.requestForm.controls.actualTaskTypePermission.get("edit"))?null:o.value),b.xp6(1),b.Q6J("ngIf",null==(s=t.requestForm.controls.actualTaskTypePermission.get("edit"))?null:s.value),b.xp6(1),b.Q6J("ngIf",!(null!=(i=t.requestForm.controls.actualTaskTypePermission.get("edit"))&&i.value)),b.xp6(1),b.Q6J("ngIf",!(null!=(r=t.requestForm.controls.actualTaskTypePermission.get("edit"))&&r.value)),b.xp6(2),b.Q6J("ngIf",null==(n=t.requestForm.controls.actualTaskTypePermission.get("delete"))?null:n.value)}}function De(e,t){if(1&e&&b.YNc(0,ke,11,7,"tr",24),2&e){const e=t.$implicit;b.Q6J("ngIf",!e.isDeleted&&(2==e.taskType||1==e.status))}}function Pe(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",35),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}const Re=function(){return[5,10,20]};function Oe(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"mat-card-content",1),b.TgZ(1,"div",2),b.TgZ(2,"div",3),b.TgZ(3,"div",4),b.TgZ(4,"h2"),b._uU(5,"Spares and Consumables "),b.TgZ(6,"span",5),b._uU(7),b.qZA(),b.qZA(),b.qZA(),b.TgZ(8,"div",6),b.TgZ(9,"p-button",7),b.NdJ("onClick",function(){return b.CHM(e),b.oxw().addOpenSparesConsumables()}),b.qZA(),b.qZA(),b.qZA(),b.TgZ(10,"p-table",8,9),b.YNc(12,ve,20,0,"ng-template",10),b.YNc(13,Te,1,1,"ng-template",11),b.YNc(14,ye,3,0,"ng-template",12),b.qZA(),b.qZA(),b.TgZ(15,"div",2),b.TgZ(16,"div",3),b.TgZ(17,"div",4),b.TgZ(18,"h2"),b._uU(19,"Opening Task Type Details "),b.TgZ(20,"span",5),b._uU(21),b.qZA(),b.qZA(),b.qZA(),b.TgZ(22,"div",6),b.TgZ(23,"p-button",7),b.NdJ("onClick",function(){return b.CHM(e),b.oxw().addOpenTaskDetail(1)}),b.qZA(),b.qZA(),b.qZA(),b.TgZ(24,"p-table",8,9),b.YNc(26,fe,15,0,"ng-template",10),b.YNc(27,Ie,1,1,"ng-template",11),b.YNc(28,Se,3,0,"ng-template",12),b.qZA(),b.qZA(),b.TgZ(29,"div",2),b.TgZ(30,"div",3),b.TgZ(31,"div",4),b.TgZ(32,"h2"),b._uU(33,"Actual Task Type Details "),b.TgZ(34,"span",5),b._uU(35),b.qZA(),b.qZA(),b.qZA(),b.TgZ(36,"div",6),b.TgZ(37,"p-button",7),b.NdJ("onClick",function(){return b.CHM(e),b.oxw().addOpenTaskDetail(2)}),b.qZA(),b.qZA(),b.qZA(),b.TgZ(38,"p-table",8,9),b.YNc(40,Fe,15,0,"ng-template",10),b.YNc(41,De,1,1,"ng-template",11),b.YNc(42,Pe,3,0,"ng-template",12),b.qZA(),b.qZA(),b.qZA()}if(2&e){const e=b.oxw();let t,o,s,i,r,n,a,l,u,d,c,g;b.Q6J("formGroup",e.requestForm),b.xp6(7),b.hij("(",(null==(t=e.requestForm.get("sparesConsumableList"))?null:t.value.length)||0,")"),b.xp6(2),b.Q6J("disabled",!(null!=(o=e.requestForm.controls.spareAndConsumablePermission.get("create"))&&o.value)),b.xp6(1),b.Q6J("value",null==(s=e.requestForm.get("sparesConsumableList"))?null:s.value)("paginator",!0)("alwaysShowPaginator",!1)("rows",5)("rowsPerPageOptions",b.DdM(25,Re))("totalRecords",null==(i=e.requestForm.get("sparesConsumableList"))?null:i.value.length),b.xp6(11),b.hij("(",null==(r=e.requestForm.get("enquiryTaskLine"))?null:r.value.length,")"),b.xp6(2),b.Q6J("disabled",!(null!=(n=e.requestForm.controls.openingTaskTypePermission.get("create"))&&n.value)),b.xp6(1),b.Q6J("value",null==(a=e.requestForm.get("enquiryTaskLine"))?null:a.value)("paginator",!0)("alwaysShowPaginator",!1)("rows",5)("rowsPerPageOptions",b.DdM(26,Re))("totalRecords",null==(l=e.requestForm.get("enquiryTaskLine"))?null:l.value.length),b.xp6(11),b.hij("(",(null==(u=e.requestForm.get("enquiryTaskLine"))?null:u.value.length)||0,")"),b.xp6(2),b.Q6J("disabled",!(null!=(d=e.requestForm.controls.actualTaskTypePermission.get("create"))&&d.value)),b.xp6(1),b.Q6J("value",null==(c=e.requestForm.get("enquiryTaskLine"))?null:c.value)("paginator",!0)("alwaysShowPaginator",!1)("rows",5)("rowsPerPageOptions",b.DdM(27,Re))("totalRecords",null==(g=e.requestForm.get("enquiryTaskLine"))?null:g.value.length)}}let Ve=(()=>{class e{constructor(e,t,o,s){this.service=e,this.formBuilder=t,this.authService=o,this.dialog=s,this.showaddbutt=!1,this.Spareshowaddbutt=!1,this.Openingaddbutt=!0,this.ActualTaskTypeDelete=!0}ngOnInit(){var e,t,o,s,i,r,n,a,l;console.log(null===(e=this.requestForm.controls.manpowerTaskTimeList)||void 0===e?void 0:e.value.length),2==(null===(t=this.requestForm.controls.request.get("enquiryStatus"))||void 0===t?void 0:t.value)&&0!=(null===(o=this.requestForm.controls.assignedManpowerList)||void 0===o?void 0:o.value.length)&&(this.showaddbutt=!0),((null===(s=this.requestForm.controls.manpowerTaskTimeList)||void 0===s?void 0:s.value.length)>0||25==(null===(i=this.requestForm.controls.request.get("enquiryStatus"))||void 0===i?void 0:i.value))&&(this.Openingaddbutt=!1),25!=(null===(r=this.requestForm.controls.request.get("enquiryStatus"))||void 0===r?void 0:r.value)&&21!=(null===(n=this.requestForm.controls.request.get("enquiryStatus"))||void 0===n?void 0:n.value)&&3!=(null===(a=this.requestForm.controls.request.get("enquiryStatus"))||void 0===a?void 0:a.value)||(this.ActualTaskTypeDelete=!1),console.log(this.Openingaddbutt),21!=(null===(l=this.requestForm.controls.request.get("enquiryStatus"))||void 0===l?void 0:l.value)&&(this.Spareshowaddbutt=!0)}OpeningTask_quantity(e,t,o){var s,i,r;const n=this.requestForm.controls.enquiryTaskLine.at(e);1==o?null===(s=n.get("quantity"))||void 0===s||s.setValue(Number(t.target.value)):3==o?null===(i=n.get("actualQuantity"))||void 0===i||i.setValue(Number(t.target.value)):4==o&&(null===(r=n.get("actualPrice"))||void 0===r||r.setValue(Number(t.target.value)))}spareAndConsumable_quantity(e,t,o){var s,i;console.log(o),console.log(t.target.value);const r=this.requestForm.controls.sparesConsumableList.at(e);null===(s=r.get("quantity"))||void 0===s||s.setValue(Number(t.target.value)),null===(i=r.get("salePrice"))||void 0===i||i.setValue(Number(o*t.target.value))}addOpenTaskDetail(e){var t;this.type=e,console.log(this.requestForm.controls.request);const o=null===(t=this.requestForm.controls.request.get("serviceId"))||void 0===t?void 0:t.value;o?this.dialog.open(me.U,{data:{serviceId:parseInt(o)},width:"600px"}).afterClosed().subscribe(e=>{e&&this.addTaskType(e)}):this.service.notify.showError("Please select Service in Service Request Details")}addTaskType(e){const t=this.requestForm.controls.enquiryTaskLine,o=t.value.filter(t=>t.subCategory===e.subCategory);if(console.log(this.type),0==o.length){if(e){const o=new l.T(e);o.id=0,o.enquiryId=this.requestId,o.rowStatus=1,o.taskType=this.type,o.actualQuantity=e.quantity,o.actualPrice=e.price,o.total=e.price*e.quantity,o.actualTotal=e.price*e.quantity,o.createdBy=this.authService.currentUserValue.id.toString();const s=this.formBuilder.formGroup(o);t.push(s)}}else this.service.notify.showSuccess("This Task already exists in the list, You may modify the Task Quantity if required.")}deleteTaskType(e){this.dialog.open(T.z,{width:"400px",data:{header:"Delete",message:"Are you sure to delete!"}}).afterClosed().subscribe(t=>{var o,s,i;if(t){const t=this.requestForm.controls.enquiryTaskLine,r=t.at(e);(null===(o=r.get("id"))||void 0===o?void 0:o.value)>0?(null===(s=r.get("isDeleted"))||void 0===s||s.setValue(!0),null===(i=r.get("rowStatus"))||void 0===i||i.setValue(4)):t.removeAt(e)}})}addOpenSparesConsumables(){var e,t;if(0!=(null===(e=this.requestForm.controls.assignedManpowerList)||void 0===e?void 0:e.value.length)){const e=null===(t=this.requestForm.controls.request.get("serviceId"))||void 0===t?void 0:t.value,o=this.requestForm.controls.enquiryTaskLine;e?this.dialog.open(pe,{data:{serviceId:parseInt(e),enquiryTaskLines:o},width:"600px"}).afterClosed().subscribe(e=>{e&&this.addSparesConsumables(e)}):this.service.notify.showError("Please select Service in Service Request Details")}else this.service.notify.showError("Can't Add Materials, No Manpower has been Assigned yet.")}addSparesConsumables(e){const t=this.requestForm.controls.sparesConsumableList;if(e){const o=new m(e);o.id=0,o.enquiryId=this.requestId,o.materialId=e.materialId,o.materialName=e.materialName;const s=this.formBuilder.formGroup(o);t.push(s)}}deleteSparesConsumables(e){this.dialog.open(T.z,{width:"400px",data:{header:"Delete",message:"Are you sure to delete!"}}).afterClosed().subscribe(t=>{var o,s,i;if(t){const t=this.requestForm.controls.sparesConsumableList,r=t.at(e);(null===(o=r.get("id"))||void 0===o?void 0:o.value)>0?(null===(s=r.get("isDeleted"))||void 0===s||s.setValue(!0),null===(i=r.get("rowStatus"))||void 0===i||i.setValue(4)):t.removeAt(e)}})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(ue.i),b.Y36(a.GW),b.Y36(w.e),b.Y36(f.uw))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-task-details"]],inputs:{requestId:"requestId",requestForm:"requestForm"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"tabBody"],[1,"row"],[1,"col-8"],[1,"text-b"],[1,"col-4","btnWrap","mb-2"],["label","Add","icon","pi pi-plus","iconPos","left",3,"disabled","onClick"],["dataKey","id",1,"pTable",3,"value","paginator","alwaysShowPaginator","rows","rowsPerPageOptions","totalRecords"],["openingTaskDetails",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["id","header","pSortableColumn","materialId"],["field","materialId"],["id","header","pSortableColumn","materialName"],["field","materialName"],["id","header","pSortableColumn","subCategory"],["field","subCategoryName"],["id","header","pSortableColumn","quantity"],["field","quantity"],["id","header","pSortableColumn","materialAddedOn"],["field","materialAddedOn"],["id","header"],[4,"ngIf"],["class","icon",3,"click",4,"ngIf"],[1,"icon",3,"click"],["colspan","9"],["id","header","pSortableColumn","serviceCategory"],["field","serviceCategory"],["id","header","pSortableColumn","serviceSubCategory"],["field","serviceSubCategory"],["id","header","pSortableColumn","amount"],["field","amount"],["pInputText","","required","",1,"form-control",3,"value","change"],["colspan","5"],["id","header","pSortableColumn","actualQuantity"],["field","actualQuantity"],["id","header","pSortableColumn","actualPrice"],["field","actualPrice"]],template:function(e,t){1&e&&b.YNc(0,Oe,43,28,"mat-card-content",0),2&e&&b.Q6J("ngIf",t.requestForm)},directives:[s.O5,$.dn,a.w5,r.JL,r.sg,he.zx,P.iA,R.jx,P.lQ,P.fz,W.Hw],styles:[""]}),e})();var Ye=o(7374);let Je=(()=>{class e extends Ye.b{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(b.LFG(b.zs3))},e.\u0275prov=b.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Le(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"th",9),b._uU(2," Call Time "),b._UZ(3,"p-sortIcon",10),b.qZA(),b.TgZ(4,"th",11),b._uU(5," Agent ID "),b._UZ(6,"p-sortIcon",12),b.qZA(),b.TgZ(7,"th",13),b._uU(8," Call Type "),b._UZ(9,"p-sortIcon",14),b.qZA(),b.TgZ(10,"th",15),b._uU(11," Phone Number "),b._UZ(12,"p-sortIcon",16),b.qZA(),b.TgZ(13,"th",17),b._uU(14," Call Duration "),b._UZ(15,"p-sortIcon",18),b.qZA(),b.TgZ(16,"th",19),b._uU(17," Audio File "),b._UZ(18,"p-sortIcon",20),b.qZA(),b.TgZ(19,"th",21),b._uU(20," Last Remark "),b._UZ(21,"p-sortIcon",22),b.qZA(),b.TgZ(22,"th",23),b._uU(23," Remark Time "),b._UZ(24,"p-sortIcon",24),b.qZA(),b.qZA())}function Qe(e,t){if(1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td"),b._uU(2),b.qZA(),b.TgZ(3,"td"),b._uU(4),b.qZA(),b.TgZ(5,"td"),b._uU(6),b.qZA(),b.TgZ(7,"td"),b._uU(8),b.qZA(),b.TgZ(9,"td"),b._uU(10),b.qZA(),b.TgZ(11,"td"),b._uU(12),b.qZA(),b.TgZ(13,"td"),b._uU(14),b.qZA(),b.TgZ(15,"td"),b._uU(16),b.qZA(),b.qZA()),2&e){const e=b.oxw().$implicit,t=b.oxw(2);b.xp6(2),b.Oqu(e.callTime),b.xp6(2),b.Oqu(e.agentID),b.xp6(2),b.hij("",e.callType," "),b.xp6(2),b.Oqu(e.phoneNo),b.xp6(2),b.Oqu(null!=e.callDuration?e.callDuration.hours+":"+e.callDuration.minutes+":"+e.callDuration.seconds:""),b.xp6(2),b.Oqu(e.recordingFileName),b.xp6(2),b.Oqu(e.description),b.xp6(2),b.Oqu(t.service.Moment(e.createdOn).format("MM-DD-YYYY h:mm a"))}}function Ee(e,t){1&e&&b.YNc(0,Qe,17,8,"tr",25),2&e&&b.Q6J("ngIf",!t.$implicit.isDeleted)}function Be(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",26),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}function Ge(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"th",27),b._uU(2," Visit Time "),b._UZ(3,"p-sortIcon",28),b.qZA(),b.TgZ(4,"th",29),b._uU(5," Visited By "),b._UZ(6,"p-sortIcon",30),b.qZA(),b.TgZ(7,"th",31),b._uU(8," Visited GPS Location "),b._UZ(9,"p-sortIcon",32),b.qZA(),b.TgZ(10,"th",23),b._uU(11," Remark Time "),b._UZ(12,"p-sortIcon",24),b.qZA(),b.TgZ(13,"th",33),b._uU(14," Image Taken "),b._UZ(15,"p-sortIcon",34),b.qZA(),b.TgZ(16,"th",35),b._uU(17," Visit Remark "),b._UZ(18,"p-sortIcon",36),b.qZA(),b.qZA())}function je(e,t){if(1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td"),b._uU(2),b.qZA(),b.TgZ(3,"td"),b._uU(4),b.qZA(),b.TgZ(5,"td"),b._uU(6),b.qZA(),b.TgZ(7,"td"),b._uU(8),b.qZA(),b.TgZ(9,"td"),b._uU(10),b.qZA(),b.TgZ(11,"td"),b._uU(12),b.qZA(),b.qZA()),2&e){const e=b.oxw().$implicit,t=b.oxw(2);b.xp6(2),b.hij(" ",t.service.Moment(e.startTime).format("MM-DD-YYYY h:mm a")," "),b.xp6(2),b.Oqu(e.stageModifiedBy),b.xp6(2),b.hij("",e.homeaddress," "),b.xp6(2),b.Oqu(e.delaytime),b.xp6(2),b.Oqu(e.houseAddressImage),b.xp6(2),b.Oqu(e.delayReason)}}function He(e,t){1&e&&b.YNc(0,je,13,6,"tr",25),2&e&&b.Q6J("ngIf",!t.$implicit.isDeleted)}function We(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",37),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}const ze=function(){return[5,10,20]},$e=function(){return{"table-layout":"auto"}};function Ke(e,t){if(1&e&&(b.TgZ(0,"mat-card-content",1),b.TgZ(1,"div",2),b.TgZ(2,"p-table",3,4),b.YNc(4,Le,25,0,"ng-template",5),b.YNc(5,Ee,1,1,"ng-template",6),b.YNc(6,Be,3,0,"ng-template",7),b.qZA(),b.qZA(),b.TgZ(7,"div",2),b.TgZ(8,"p-table",8,4),b.YNc(10,Ge,19,0,"ng-template",5),b.YNc(11,He,1,1,"ng-template",6),b.YNc(12,We,3,0,"ng-template",7),b.qZA(),b.qZA(),b.qZA()),2&e){const e=b.oxw();let t,o,s,i;b.Q6J("formGroup",e.requestForm),b.xp6(2),b.Q6J("value",null==(t=e.requestForm.get("enquiryCallDetailList"))?null:t.value)("paginator",!0)("alwaysShowPaginator",!1)("rows",5)("rowsPerPageOptions",b.DdM(14,ze))("totalRecords",null==(o=e.requestForm.get("enquiryCallDetailList"))?null:o.value.length)("tableStyle",b.DdM(15,$e)),b.xp6(6),b.Q6J("value",null==(s=e.requestForm.get("customerCorrespondenceList"))?null:s.value)("paginator",!0)("alwaysShowPaginator",!1)("rows",5)("rowsPerPageOptions",b.DdM(16,ze))("totalRecords",null==(i=e.requestForm.get("customerCorrespondenceList"))?null:i.value.length)}}let Xe=(()=>{class e{constructor(e){this.service=e}ngOnInit(){var e;console.log(null===(e=this.requestForm.controls.enquiryCallDetailList)||void 0===e?void 0:e.value)}get RequestDetail(){return this.requestForm.controls.request}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(Je))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-customer"]],inputs:{requestId:"requestId",requestForm:"requestForm"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"tabBody"],["dataKey","id",1,"pTable",3,"value","paginator","alwaysShowPaginator","rows","rowsPerPageOptions","totalRecords","tableStyle"],["openingTaskDetails",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["dataKey","id",1,"pTable",3,"value","paginator","alwaysShowPaginator","rows","rowsPerPageOptions","totalRecords"],["id","header","pSortableColumn","callTime"],["field","callTime"],["id","header","pSortableColumn","agentID"],["field","agentID"],["id","header","pSortableColumn","callType"],["field","callType"],["id","header","pSortableColumn","phoneNumber"],["field","phoneNumber"],["id","header","pSortableColumn","callDuration"],["field","callDuration"],["id","header","pSortableColumn","audioFile"],["field","audioFile"],["id","header","pSortableColumn","lastRemark"],["field","lastRemark"],["id","header","pSortableColumn","remarkTime"],["field","remarkTime"],[4,"ngIf"],["colspan","8"],["id","header","pSortableColumn","visitTime"],["field","visitTime"],["id","header","pSortableColumn","visitedBy"],["field","visitedBy"],["id","header","pSortableColumn","visitedGPSLocation"],["field","visitedGPSLocation"],["id","header","pSortableColumn","imageTaken"],["field","imageTaken"],["id","header","pSortableColumn","visitRemark"],["field","visitRemark"],["colspan","6"]],template:function(e,t){1&e&&b.YNc(0,Ke,13,17,"mat-card-content",0),2&e&&b.Q6J("ngIf",t.requestForm)},directives:[s.O5,$.dn,a.w5,r.JL,r.sg,P.iA,R.jx,P.lQ,P.fz],styles:[""]}),e})(),et=(()=>{class e extends Ye.b{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(b.LFG(b.zs3))},e.\u0275prov=b.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const tt=function(e){return{"is-invalid  ng-dirty":e}};function ot(e,t){if(1&e&&(b.TgZ(0,"form",5),b.TgZ(1,"div",6),b.TgZ(2,"div",7),b.TgZ(3,"label"),b._uU(4,"Employee"),b.qZA(),b._UZ(5,"p-dropdown",8),b.qZA(),b.TgZ(6,"div",7),b.TgZ(7,"label"),b._uU(8,"Start Time"),b.TgZ(9,"span",9),b._uU(10,"*"),b.qZA(),b.qZA(),b._UZ(11,"input",10),b.qZA(),b.qZA(),b.qZA()),2&e){const e=b.oxw();b.Q6J("formGroup",e.manpowerTaskTimeForm),b.xp6(5),b.Q6J("options",e.EmployeeArr)("ngClass",b.VKq(6,tt,e.manpowerTaskTimeForm.controls.employeeId.touched&&e.manpowerTaskTimeForm.controls.employeeId.errors))("required",!0),b.xp6(6),b.Q6J("ngClass",b.VKq(8,tt,e.manpowerTaskTimeForm.controls.startTime.touched&&e.manpowerTaskTimeForm.controls.startTime.errors))("required",!0)}}let st=(()=>{class e{constructor(e,t,o,s){this.formBuilder=e,this.service=t,this.data=o,this.dialogRef=s}ngOnInit(){console.log(this.data.assignedManpowerList),this.bindDropdowns(),this.initialize(),this.EmployeeArr=this.data.assignedManpowerList,console.log(this.EmployeeArr)}bindDropdowns(){}initialize(){const e=new g;this.manpowerTaskTimeForm=this.formBuilder.formGroup(e)}addManpowerTaskTime(){if(this.manpowerTaskTimeForm.valid){const e=this.manpowerTaskTimeForm.getRawValue();console.log("taskType"),console.log(e),e.employeeName=e.employeeId.employeeName,e.employeeId=e.employeeId.employeeId,e.startTime=e.startTime,this.dialogRef.close(e)}else this.manpowerTaskTimeForm.markAllAsTouched(),this.service.notify.showDefaultError()}cancel(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.GW),b.Y36(et),b.Y36(f.WI),b.Y36(f.so))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-manpower-task-time"]],inputs:{requestForm:"requestForm"},decls:10,vars:1,consts:[[1,"mat-dialog-title"],["class","formWrap",3,"formGroup",4,"ngIf"],[1,"btnWrap"],["mat-button","","color","secondary",3,"click"],["mat-button","","color","primary",3,"click"],[1,"formWrap",3,"formGroup"],[1,"row"],[1,"col-6"],["appendTo","body","formControlName","employeeId","optionLabel","employeeName","placeholder","-Select-",1,"ui-input",3,"options","ngClass","required"],[1,"mandatoryField"],["type","datetime-local","formControlName","startTime",1,"form-control",3,"ngClass","required"]],template:function(e,t){1&e&&(b.TgZ(0,"div",0),b._uU(1,"Add Manpower Task Time"),b.qZA(),b.TgZ(2,"mat-dialog-content"),b.YNc(3,ot,12,10,"form",1),b.qZA(),b.TgZ(4,"mat-dialog-actions"),b.TgZ(5,"div",2),b.TgZ(6,"button",3),b.NdJ("click",function(){return t.cancel()}),b._uU(7,"Cancel"),b.qZA(),b.TgZ(8,"button",4),b.NdJ("click",function(){return t.addManpowerTaskTime()}),b._uU(9,"Submit"),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(3),b.Q6J("ngIf",t.manpowerTaskTimeForm))},directives:[f.xY,s.O5,f.H8,I.lW,r._Y,r.JL,a.w5,r.sg,X.Lt,a.x0,a.bf,r.JJ,r.u,s.mk,r.Q7,r.Fj],styles:[""]}),e})();var it=o(7539);function rt(e,t){1&e&&(b.TgZ(0,"tr"),b._UZ(1,"th",9),b.TgZ(2,"th",9),b._uU(3," SL No. "),b.qZA(),b.TgZ(4,"th",10),b._uU(5," E-Code. "),b.qZA(),b.TgZ(6,"th",11),b._uU(7," Name "),b.qZA(),b.TgZ(8,"th",12),b._uU(9," Service Category "),b.qZA(),b.TgZ(10,"th",13),b._uU(11," Payroll "),b.qZA(),b.TgZ(12,"th",14),b._uU(13," Mobile "),b.qZA(),b.TgZ(14,"th",15),b._uU(15," City "),b.qZA(),b.TgZ(16,"th",16),b._uU(17," Area Served "),b.qZA(),b.TgZ(18,"th",17),b._uU(19," Workload "),b.qZA(),b.TgZ(20,"th",18),b._uU(21," SR Count "),b.qZA(),b.qZA())}function nt(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"tr"),b.TgZ(1,"td"),b.TgZ(2,"mat-checkbox",20),b.NdJ("change",function(t){b.CHM(e);const o=b.oxw().$implicit;return b.oxw().onChkChildChange(t,o.employeeCode)}),b.qZA(),b.qZA(),b.TgZ(3,"td"),b._uU(4),b.qZA(),b.TgZ(5,"td"),b._uU(6),b.qZA(),b.TgZ(7,"td"),b._uU(8),b.qZA(),b.TgZ(9,"td"),b._uU(10),b.qZA(),b.TgZ(11,"td"),b._uU(12),b.qZA(),b.TgZ(13,"td"),b._uU(14),b.qZA(),b.TgZ(15,"td"),b._uU(16),b.qZA(),b.TgZ(17,"td"),b._uU(18),b.qZA(),b.TgZ(19,"td"),b.TgZ(20,"button",21),b._uU(21,"\xa0"),b.qZA(),b.qZA(),b.TgZ(22,"td"),b._uU(23),b.qZA(),b.qZA()}if(2&e){const e=b.oxw(),t=e.rowIndex,o=e.$implicit,s=b.oxw();b.xp6(4),b.Oqu(t+1),b.xp6(2),b.Oqu(o.employeeCode),b.xp6(2),b.Oqu(o.employeeName),b.xp6(2),b.Oqu(o.serviceName),b.xp6(2),b.hij(" ",o.companyName,""),b.xp6(2),b.Oqu(o.mobile),b.xp6(2),b.Oqu(o.city),b.xp6(2),b.Oqu(o.location),b.xp6(2),b.Tol(s.workload(o.totalAssignment)),b.xp6(3),b.Oqu(o.totalAssignment)}}function at(e,t){1&e&&b.YNc(0,nt,24,12,"tr",19),2&e&&b.Q6J("ngIf",!t.$implicit.isDeleted)}function lt(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",22),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}let ut=(()=>{class e{constructor(e,t,o,s){this.formBuilder=e,this.service=t,this.data=o,this.dialogRef=s,this.getSRAvailableManpowerSelect=[]}ngOnInit(){this.bindDropdowns(),this.initialize()}bindDropdowns(){this.getSRAvailableManpower=this.data.getSRAvailableManpower}initialize(){const e=new c;this.manpowerTaskTimeForm=this.formBuilder.formGroup(e)}onChkChildChange(e,t){console.log(e.checked),console.log(t),1==e.checked?this.getSRAvailableManpowerSelect.push(this.getSRAvailableManpower.filter(e=>e.employeeCode==t)[0]):this.getSRAvailableManpowerSelect.forEach((e,o)=>{console.log(e[0].employeeCode),e[0].employeeCode==t&&this.getSRAvailableManpowerSelect.splice(o,1)}),console.log(this.getSRAvailableManpowerSelect)}addAssignedManpower(){this.manpowerTaskTimeForm.valid?this.dialogRef.close(this.getSRAvailableManpowerSelect):(this.manpowerTaskTimeForm.markAllAsTouched(),this.service.notify.showDefaultError())}cancel(){this.dialogRef.close()}workload(e){return e<=2?"btn btn-success btn-xs":e>2&&e<=4?"btn btn-warning btn-xs":e>4?"btn btn-danger btn-xs":"btn btn-success btn-xs"}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.GW),b.Y36(et),b.Y36(f.WI),b.Y36(f.so))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-assigned-manpower"]],inputs:{requestForm:"requestForm"},decls:14,vars:1,consts:[[1,"mat-dialog-title"],["dataKey","id",1,"pTable","selectManpower",3,"value"],["openingTaskDetails",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"btnWrap"],["mat-button","","color","secondary",3,"click"],["mat-button","","color","primary",3,"click"],["id","header","pSortableColumn","SLNo"],["id","header","pSortableColumn","e_Code"],["id","header","pSortableColumn","Name"],["id","header","pSortableColumn","ServiceCategory"],["id","header","pSortableColumn","Payroll"],["id","header","pSortableColumn","Mobile"],["id","header","pSortableColumn","City"],["id","header","pSortableColumn","AreaServed"],["id","header","pSortableColumn","Workload"],["id","header","pSortableColumn","SRCount"],[4,"ngIf"],[3,"change"],["type","reset"],["colspan","6"]],template:function(e,t){1&e&&(b.TgZ(0,"div",0),b._uU(1,"Choose Manpower"),b.qZA(),b.TgZ(2,"mat-dialog-content"),b.TgZ(3,"p-table",1,2),b.YNc(5,rt,22,0,"ng-template",3),b.YNc(6,at,1,1,"ng-template",4),b.YNc(7,lt,3,0,"ng-template",5),b.qZA(),b.qZA(),b.TgZ(8,"mat-dialog-actions"),b.TgZ(9,"div",6),b.TgZ(10,"button",7),b.NdJ("click",function(){return t.cancel()}),b._uU(11,"Cancel"),b.qZA(),b.TgZ(12,"button",8),b.NdJ("click",function(){return t.addAssignedManpower()}),b._uU(13,"Submit"),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(3),b.Q6J("value",t.getSRAvailableManpower))},directives:[f.xY,P.iA,R.jx,f.H8,I.lW,P.lQ,s.O5,it.oG],styles:[""]}),e})();function dt(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"th",13),b._uU(2," Is Active "),b._UZ(3,"p-sortIcon",14),b.qZA(),b.TgZ(4,"th",15),b._uU(5," Employee Name "),b._UZ(6,"p-sortIcon",16),b.qZA(),b.TgZ(7,"th",17),b._uU(8," Company "),b._UZ(9,"p-sortIcon",18),b.qZA(),b.TgZ(10,"th",19),b._uU(11," service "),b._UZ(12,"p-sortIcon",20),b.qZA(),b.TgZ(13,"th",21),b._uU(14," Mobile "),b._UZ(15,"p-sortIcon",22),b.qZA(),b.TgZ(16,"th",23),b._uU(17," Delete "),b._UZ(18,"p-sortIcon",24),b.qZA(),b.qZA())}function ct(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"mat-icon",28),b.NdJ("click",function(){b.CHM(e);const t=b.oxw(2),o=t.$implicit,s=t.rowIndex;return b.oxw(2).deleteAssignedManpower(o.id,s)}),b._uU(1,"delete"),b.qZA()}}function gt(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"tr"),b.TgZ(1,"td"),b.TgZ(2,"mat-checkbox",26),b.NdJ("change",function(t){b.CHM(e);const o=b.oxw().rowIndex;return b.oxw(2).OpenAssignedManpoweredit(t,o)}),b.qZA(),b.qZA(),b.TgZ(3,"td"),b._uU(4),b.qZA(),b.TgZ(5,"td"),b._uU(6),b.qZA(),b.TgZ(7,"td"),b._uU(8),b.qZA(),b.TgZ(9,"td"),b._uU(10),b.qZA(),b.TgZ(11,"td"),b.YNc(12,ct,2,0,"mat-icon",27),b.qZA(),b.qZA()}if(2&e){const e=b.oxw().$implicit,t=b.oxw(2);let o;b.xp6(2),b.Q6J("disabled",t.isDisabled)("checked",e.isActive),b.xp6(2),b.Oqu(e.employeeName),b.xp6(2),b.hij("",e.companyName," "),b.xp6(2),b.Oqu(e.serviceName),b.xp6(2),b.Oqu(e.mobileNo),b.xp6(2),b.Q6J("ngIf",null==(o=t.requestForm.controls.assignedManpowerPermission.get("delete"))?null:o.value)}}function pt(e,t){1&e&&b.YNc(0,gt,13,7,"tr",25),2&e&&b.Q6J("ngIf",!t.$implicit.isDeleted)}function mt(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",29),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}function ht(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"th",15),b._uU(2," Employee Name "),b._UZ(3,"p-sortIcon",16),b.qZA(),b.TgZ(4,"th",30),b._uU(5," Start Time "),b._UZ(6,"p-sortIcon",31),b.qZA(),b.TgZ(7,"th",32),b._uU(8," End Time "),b._UZ(9,"p-sortIcon",33),b.qZA(),b.qZA())}function vt(e,t){if(1&e&&(b.TgZ(0,"td"),b._uU(1),b.qZA()),2&e){const e=b.oxw(2).$implicit,t=b.oxw(2);b.xp6(1),b.hij(" ",t.service.Moment(e.startTime).format("MM-DD-YYYY h:mm a"),"")}}function qt(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"td"),b.TgZ(1,"div",34),b.TgZ(2,"input",35,36),b.NdJ("change",function(){b.CHM(e);const t=b.MAs(3),o=b.oxw(2).rowIndex;return b.oxw(2).ManpowerTaskTimeEdit(t.value,o,1)}),b.qZA(),b.qZA(),b.qZA()}if(2&e){const e=b.oxw(2).$implicit;b.xp6(2),b.s9C("value",e.startTime)}}function Zt(e,t){if(1&e&&(b.TgZ(0,"td"),b._uU(1),b.qZA()),2&e){const e=b.oxw(2).$implicit,t=b.oxw(2);b.xp6(1),b.hij(" ",t.service.Moment(e.endTime).format("MM-DD-YYYY h:mm a"),"")}}function Tt(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"td"),b.TgZ(1,"div",34),b.TgZ(2,"input",37,38),b.NdJ("change",function(){b.CHM(e);const t=b.MAs(3),o=b.oxw(2).rowIndex;return b.oxw(2).ManpowerTaskTimeEdit(t.value,o,2)}),b.qZA(),b.qZA(),b.qZA()}if(2&e){const e=b.oxw(2).$implicit;b.xp6(2),b.s9C("min",e.startTime),b.s9C("value",e.endTime)}}function yt(e,t){if(1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td"),b._uU(2),b.qZA(),b.YNc(3,vt,2,1,"td",25),b.YNc(4,qt,4,1,"td",25),b.YNc(5,Zt,2,1,"td",25),b.YNc(6,Tt,4,2,"td",25),b.qZA()),2&e){const e=b.oxw().$implicit,t=b.oxw(2);let o,s,i,r;b.xp6(2),b.Oqu(e.employeeName),b.xp6(1),b.Q6J("ngIf",!(null!=(o=t.requestForm.controls.manpowerTaskTimePermission.get("edit"))&&o.value)),b.xp6(1),b.Q6J("ngIf",null==(s=t.requestForm.controls.manpowerTaskTimePermission.get("edit"))?null:s.value),b.xp6(1),b.Q6J("ngIf",!(null!=(i=t.requestForm.controls.manpowerTaskTimePermission.get("edit"))&&i.value)),b.xp6(1),b.Q6J("ngIf",null==(r=t.requestForm.controls.manpowerTaskTimePermission.get("edit"))?null:r.value)}}function ft(e,t){1&e&&b.YNc(0,yt,7,5,"tr",25),2&e&&b.Q6J("ngIf",!t.$implicit.isDeleted)}function At(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",39),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}const bt=function(){return[5,10,20]};function Ct(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"mat-card-content",1),b.TgZ(1,"div",2),b.TgZ(2,"div",3),b.TgZ(3,"div",4),b.TgZ(4,"h2"),b._uU(5,"Assigned Manpower "),b.TgZ(6,"span",5),b._uU(7),b.qZA(),b.qZA(),b.qZA(),b.TgZ(8,"div",6),b.TgZ(9,"p-button",7),b.NdJ("onClick",function(){return b.CHM(e),b.oxw().addOpenAssignedManpower()}),b.qZA(),b.qZA(),b.qZA(),b.TgZ(10,"p-table",8,9),b.YNc(12,dt,19,0,"ng-template",10),b.YNc(13,pt,1,1,"ng-template",11),b.YNc(14,mt,3,0,"ng-template",12),b.qZA(),b.qZA(),b.TgZ(15,"div",2),b.TgZ(16,"div",3),b.TgZ(17,"div",4),b.TgZ(18,"h2"),b._uU(19,"Manpower Task Time Details "),b.TgZ(20,"span",5),b._uU(21),b.qZA(),b.qZA(),b.qZA(),b.TgZ(22,"div",6),b.TgZ(23,"p-button",7),b.NdJ("onClick",function(){return b.CHM(e),b.oxw().addOpenManpowerTaskTimeDetails()}),b.qZA(),b.qZA(),b.qZA(),b.TgZ(24,"p-table",8,9),b.YNc(26,ht,10,0,"ng-template",10),b.YNc(27,ft,1,1,"ng-template",11),b.YNc(28,At,3,0,"ng-template",12),b.qZA(),b.qZA(),b.qZA()}if(2&e){const e=b.oxw();let t,o,s,i,r,n,a,l;b.Q6J("formGroup",e.requestForm),b.xp6(7),b.hij("(",null==(t=e.requestForm.get("assignedManpowerList"))?null:t.value.length,")"),b.xp6(2),b.Q6J("disabled",!(null!=(o=e.requestForm.controls.assignedManpowerPermission.get("create"))&&o.value)),b.xp6(1),b.Q6J("value",null==(s=e.requestForm.get("assignedManpowerList"))?null:s.value)("paginator",!0)("alwaysShowPaginator",!1)("rows",5)("rowsPerPageOptions",b.DdM(17,bt))("totalRecords",null==(i=e.requestForm.get("assignedManpowerList"))?null:i.value.length),b.xp6(11),b.hij("(",null==(r=e.requestForm.get("manpowerTaskTimeList"))?null:r.value.length,")"),b.xp6(2),b.Q6J("disabled",!(null!=(n=e.requestForm.controls.manpowerTaskTimePermission.get("create"))&&n.value)),b.xp6(1),b.Q6J("value",null==(a=e.requestForm.get("manpowerTaskTimeList"))?null:a.value)("paginator",!0)("alwaysShowPaginator",!1)("rows",5)("rowsPerPageOptions",b.DdM(18,bt))("totalRecords",null==(l=e.requestForm.get("manpowerTaskTimeList"))?null:l.value.length)}}let wt=(()=>{class e{constructor(e,t,o,s,i){this.service=e,this.formBuilder=t,this.dialog=o,this.service1=s,this.authService=i,this.isDisabled=!0}ngOnInit(){var e,t,o,s;console.log(null===(e=this.requestForm.controls.assignedManpowerList)||void 0===e?void 0:e.value),2!=(null===(t=this.requestForm.controls.request.get("enquiryStatus"))||void 0===t?void 0:t.value)&&25!=(null===(o=this.requestForm.controls.request.get("enquiryStatus"))||void 0===o?void 0:o.value)||(this.showaddbutt=!0),2==(null===(s=this.requestForm.controls.request.get("enquiryStatus"))||void 0===s?void 0:s.value)&&(this.isDisabled=!1)}OpenAssignedManpoweredit(e,t){var o;null===(o=this.requestForm.controls.assignedManpowerList.at(t).get("isActive"))||void 0===o||o.setValue(e.checked),console.log(this.requestForm.controls.assignedManpowerList.value)}deleteAssignedManpower(e,t){this.dialog.open(T.z,{width:"400px",data:{header:"Delete",message:"Are you sure to delete!"}}).afterClosed().subscribe(e=>{var o,s,i;if(e){const e=this.requestForm.controls.assignedManpowerList,r=e.at(t);(null===(o=r.get("id"))||void 0===o?void 0:o.value)>0?(null===(s=r.get("isDeleted"))||void 0===s||s.setValue(!0),null===(i=r.get("rowStatus"))||void 0===i||i.setValue(4)):e.removeAt(t)}})}addOpenAssignedManpower(){var e,t,o,s;const i=null===(e=this.requestForm.controls.request.get("serviceId"))||void 0===e?void 0:e.value,r={serviceId:null===(t=this.requestForm.controls.request.get("serviceId"))||void 0===t?void 0:t.value,cityId:null===(o=this.requestForm.controls.request.get("cityId"))||void 0===o?void 0:o.value,prerredDate:null===(s=this.requestForm.controls.request.get("preferredDate"))||void 0===s?void 0:s.value};this.service1.getSRAvailableManpower(r).subscribe(e=>{if("success"==e.status)if(console.log("response.data"),console.log(e.data),e.data.length?(console.log("this.getSRAvailableManpower "),this.getSRAvailableManpower=e.data):this.getSRAvailableManpower=[],i){const e=this.getSRAvailableManpower;console.log("getSRAvailableManpower"),console.log(e),this.dialog.open(ut,{data:{serviceId:parseInt(i),getSRAvailableManpower:e},width:"6000px"}).afterClosed().subscribe(e=>{e&&(console.log("sdfuwgufgssfjsdfghjsdgfusghdhfg"),console.log(e),this.addAssignedManpower(e))})}else this.service.notify.showError("Please select Service in Service Request Details")})}addAssignedManpower(e){const t=this.requestForm.controls.assignedManpowerList;console.log("taskTime1"),console.log(e),e&&e.forEach(e=>{console.log(e);let o=new c;o.employeeName=e.employeeName,o.employeeId=e.employeeId,o.activeLocation=e.activeLocation,o.createdBy=this.authService.currentUserValue.id.toString(),o.isActive=!0,o.companyName=e.companyName,o.serviceName=e.serviceName,o.mobileNo=e.mobile,o.rowStatus=1,o.id=0;const s=this.formBuilder.formGroup(o);t.push(s)})}addOpenManpowerTaskTimeDetails(){var e,t;const o=null===(e=this.requestForm.controls.request.get("serviceId"))||void 0===e?void 0:e.value,s=null===(t=this.requestForm.controls.assignedManpowerList)||void 0===t?void 0:t.value;o?this.dialog.open(st,{data:{serviceId:parseInt(o),assignedManpowerList:s},width:"600px"}).afterClosed().subscribe(e=>{e&&(console.log("result"),console.log(e),this.addManpowerTaskTime(e))}):this.service.notify.showError("Please select Service in Service Request Details")}addManpowerTaskTime(e){const t=this.requestForm.controls.manpowerTaskTimeList;if(console.log("taskTime11"),console.log(e),e){const o=new g(e);o.id=0,o.rowStatus=1,o.createdBy=this.authService.currentUserValue.id.toString(),o.startTime=this.service.Moment(e.startTime).format("yyyy-MM-DDTHH:mm:ss"),console.log("------------",o);const s=this.formBuilder.formGroup(o);t.push(s)}}ManpowerTaskTimeEdit(e,t,o){var s,i;const r=this.requestForm.controls.manpowerTaskTimeList.at(t);console.log(e),console.log(r),console.log(o);let n="yyyy-MM-DDTHH:mm:ss";1==o?null===(s=r.get("startTime"))||void 0===s||s.setValue(this.service.Moment(e).format(n)):null===(i=r.get("endTime"))||void 0===i||i.setValue(this.service.Moment(e).format(n))}get RequestDetail(){return this.requestForm.controls.request}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(et),b.Y36(a.GW),b.Y36(f.uw),b.Y36(C.s),b.Y36(w.e))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-manpower"]],inputs:{requestId:"requestId",requestForm:"requestForm"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"tabBody"],[1,"row"],[1,"col-8"],[1,"text-b"],[1,"col-4","btnWrap","mb-2"],["label","Add","icon","pi pi-plus","iconPos","left",3,"disabled","onClick"],["dataKey","id",1,"pTable",3,"value","paginator","alwaysShowPaginator","rows","rowsPerPageOptions","totalRecords"],["openingTaskDetails",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["id","header","pSortableColumn","isActive"],["field","isActive"],["id","header","pSortableColumn","employeeName"],["field","employeeName"],["id","header","pSortableColumn","company"],["field","company"],["id","header","pSortableColumn","service"],["field","service"],["id","header","pSortableColumn","mobile"],["field","mobile"],["id","header","pSortableColumn","delete"],["field","delete"],[4,"ngIf"],[3,"disabled","checked","change"],["class","icon",3,"click",4,"ngIf"],[1,"icon",3,"click"],["colspan","6"],["id","header","pSortableColumn","startTime"],["field","startTime"],["id","header","pSortableColumn","endTime"],["field","endTime"],[1,"col-6"],["type","datetime-local",1,"form-control",3,"value","change"],["ref",""],["type","datetime-local",1,"form-control",3,"min","value","change"],["ref1",""],["colspan","3"]],template:function(e,t){1&e&&b.YNc(0,Ct,29,19,"mat-card-content",0),2&e&&b.Q6J("ngIf",t.requestForm)},directives:[s.O5,$.dn,a.w5,r.JL,r.sg,he.zx,P.iA,R.jx,P.lQ,P.fz,it.oG,W.Hw],styles:[".mat-tab-body-content[_ngcontent-%COMP%]{overflow:hidden}"]}),e})();function It(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"form",6),b.NdJ("ngSubmit",function(){return b.CHM(e),b.oxw().saveNotes()}),b.TgZ(1,"div",3),b.TgZ(2,"div",7),b.TgZ(3,"div",8),b.TgZ(4,"label"),b._uU(5,"Isometric Graph Image :"),b.qZA(),b.TgZ(6,"input",9),b.NdJ("change",function(t){return b.CHM(e),b.oxw().onFileSelected(t)}),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(7,"div",10),b.TgZ(8,"div"),b.TgZ(9,"button",11),b._uU(10,"Upload"),b.qZA(),b.qZA(),b.qZA(),b.qZA()}if(2&e){const e=b.oxw();b.Q6J("formGroup",e.addForm)}}function St(e,t){1&e&&b._uU(0," Service Request Details ")}function Ft(e,t){if(1&e&&(b.TgZ(0,"mat-card"),b._UZ(1,"app-request-detail",26),b.qZA()),2&e){const e=b.oxw(2);b.xp6(1),b.Q6J("requestId",e.requestId)("requestForm",e.requestForm)("lookups",e.requestDetailLookups)("obj",e.obj)}}function _t(e,t){1&e&&b._uU(0," Task Details ")}function Mt(e,t){if(1&e&&(b.TgZ(0,"mat-card"),b._UZ(1,"app-task-details",27),b.qZA()),2&e){const e=b.oxw(2);b.xp6(1),b.Q6J("requestId",e.requestId)("requestForm",e.requestForm)}}function xt(e,t){1&e&&b._uU(0," Customer Correspondence ")}function Ut(e,t){if(1&e&&(b.TgZ(0,"mat-card"),b._UZ(1,"app-customer",27),b.qZA()),2&e){const e=b.oxw(2);b.xp6(1),b.Q6J("requestId",e.requestId)("requestForm",e.requestForm)}}function Nt(e,t){1&e&&b._uU(0," Manpower ")}function kt(e,t){if(1&e&&(b.TgZ(0,"mat-card"),b._UZ(1,"app-manpower",27),b.qZA()),2&e){const e=b.oxw(2);b.xp6(1),b.Q6J("requestId",e.requestId)("requestForm",e.requestForm)}}function Dt(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"form",12),b.TgZ(1,"div",3),b.TgZ(2,"div",13),b.TgZ(3,"label"),b._uU(4,"Customer ID: "),b.qZA(),b.TgZ(5,"div"),b.TgZ(6,"a",14),b.NdJ("click",function(){return b.CHM(e),b.oxw().viewCustomerDetails()}),b._uU(7),b.qZA(),b.qZA(),b.TgZ(8,"label"),b._uU(9,"Status:"),b.qZA(),b.TgZ(10,"div"),b._uU(11),b.qZA(),b.TgZ(12,"label"),b._uU(13,"SR Number:"),b.qZA(),b.TgZ(14,"div"),b._uU(15),b.qZA(),b.TgZ(16,"label"),b._uU(17,"Zone:"),b.qZA(),b.TgZ(18,"div"),b._uU(19),b.qZA(),b.TgZ(20,"label"),b._uU(21,"Client:"),b.qZA(),b.TgZ(22,"div"),b._uU(23),b.qZA(),b.qZA(),b.TgZ(24,"div",15),b.TgZ(25,"div",10),b.TgZ(26,"button",16),b._uU(27," More Options "),b.TgZ(28,"mat-icon"),b._uU(29,"arrow_right"),b.qZA(),b.qZA(),b.TgZ(30,"mat-menu",null,17),b.TgZ(32,"button",18),b.NdJ("click",function(){return b.CHM(e),b.oxw().requestsLists()}),b._uU(33,"Requests Lists"),b.qZA(),b.TgZ(34,"button",18),b.NdJ("click",function(){return b.CHM(e),b.oxw().generatePDF()}),b._uU(35,"Generate PDF"),b.qZA(),b.TgZ(36,"button",19),b.NdJ("click",function(){return b.CHM(e),b.oxw().callRecordingUpload()}),b._uU(37,"Call Recording Upload"),b.qZA(),b.TgZ(38,"button",19),b.NdJ("click",function(){return b.CHM(e),b.oxw().uploadCustomerSignature()}),b._uU(39,"Upload Customer Signature"),b.qZA(),b.TgZ(40,"button",19),b.NdJ("click",function(){return b.CHM(e),b.oxw().changeStatus()}),b._uU(41,"Change Status/Send for Approval"),b.qZA(),b.TgZ(42,"button",19),b.NdJ("click",function(){return b.CHM(e),b.oxw().cancelRequest()}),b._uU(43,"Cancel Request"),b.qZA(),b.qZA(),b._uU(44," \xa0 "),b.TgZ(45,"button",20),b.NdJ("click",function(){return b.CHM(e),b.oxw().viewImage()}),b._uU(46),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(47,"div",3),b.TgZ(48,"div",7),b.TgZ(49,"mat-tab-group"),b.TgZ(50,"mat-tab"),b.YNc(51,St,1,0,"ng-template",21),b.YNc(52,Ft,2,4,"ng-template",22),b.qZA(),b.TgZ(53,"mat-tab"),b.YNc(54,_t,1,0,"ng-template",21),b.YNc(55,Mt,2,2,"ng-template",22),b.qZA(),b.TgZ(56,"mat-tab"),b.YNc(57,xt,1,0,"ng-template",21),b.YNc(58,Ut,2,2,"ng-template",22),b.qZA(),b.TgZ(59,"mat-tab"),b.YNc(60,Nt,1,0,"ng-template",21),b.YNc(61,kt,2,2,"ng-template",22),b.qZA(),b.qZA(),b.TgZ(62,"div",3),b.TgZ(63,"div",7),b.TgZ(64,"div",23),b.TgZ(65,"button",24),b.NdJ("click",function(){return b.CHM(e),b.oxw().onCancel()}),b._uU(66,"Cancel"),b.qZA(),b.TgZ(67,"button",25),b.NdJ("click",function(){return b.CHM(e),b.oxw().onSave()}),b._uU(68,"Submit"),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA()}if(2&e){const e=b.MAs(31),t=b.oxw();let o,s,i,r,n,a;b.Q6J("formGroup",t.requestForm),b.xp6(7),b.hij("",null==(o=t.requestForm.controls.request.get("customerId"))?null:o.value," "),b.xp6(4),b.Oqu(null==(s=t.requestForm.controls.request.get("currentEnquiryStatusValue"))?null:s.value),b.xp6(4),b.Oqu(null==(i=t.requestForm.controls.request.get("id"))?null:i.value),b.xp6(4),b.Oqu(null==(r=t.requestForm.controls.request.get("currentZoneValue"))?null:r.value),b.xp6(4),b.Oqu(null==(n=t.requestForm.controls.request.get("currentClientValue"))?null:n.value),b.xp6(3),b.Q6J("matMenuTriggerFor",e),b.xp6(10),b.Q6J("disabled",t.requestForm.disabled),b.xp6(2),b.Q6J("disabled",t.requestForm.disabled),b.xp6(2),b.Q6J("disabled",t.requestForm.disabled),b.xp6(2),b.Q6J("disabled",t.requestForm.disabled),b.xp6(4),b.hij("View Documents (",null==(a=t.requestForm.get("documentList"))?null:a.value.length,")"),b.xp6(19),b.Q6J("disabled",t.requestForm.disabled),b.xp6(2),b.Q6J("disabled",t.requestForm.disabled)}}const Pt=function(){return{width:"20vw"}};let Rt=(()=>{class e{constructor(e,t,o,s,i,r){this.service=e,this.route=t,this.formBuilder=o,this.dialog=s,this.authService=i,this.routeUrl=r,this.apiUrl=y.N.apiUrl,this.oldUrl=y.N.oldUrl,this.displayModal=!1,this.addFormGranted=!1,this.showPlus=!1}ngOnInit(){this.requestId=this.route.snapshot.params.id,this.bindDropdowns()}bindDropdowns(){this.service.getLookups([this.service.constants.MasterCategories.ZoneMaster,this.service.constants.MasterCategories.ServiceMaster,this.service.constants.MasterCategories.ServiceStageMaster,this.service.constants.MasterCategories.ServiceForMaster,this.service.constants.MasterCategories.ServiceGroup,this.service.constants.LookupCategories.PreferredTime,this.service.constants.LookupCategories.ServicePriority],e=>{this.requestDetailLookups=e,this.initialize()})}initialize(){if(this.requestId)this.service.getRequest(this.requestId).subscribe(e=>{if("success"===e.status&&e.data){this.obj={assignedManpowerList:e.data.assignedManpowerList,request:e.data.request},"21"==e.data.request.enquiryStatus&&(e.data.request.isModifyBy=0);const t=new Z(e.data);this.requestForm=this.formBuilder.formGroup(t),this.getCurrentStatusValue(),this.addForm=new r.cw({file:new r.NI(null,r.kI.required)})}});else{const e=new Z;this.requestForm=this.formBuilder.formGroup(e)}}getCurrentStatusValue(){var e,t,o;const s=this.requestDetailLookups[this.service.constants.MasterCategories.ServiceStageMaster].filter(e=>{var t;return e.keyName===(null===(t=this.requestForm.controls.request.get("currentEnquiryStatus"))||void 0===t?void 0:t.value)});s&&s.length>0&&(null===(e=this.requestForm.controls.request.get("currentEnquiryStatusValue"))||void 0===e||e.setValue(s[0].displayText));const i=this.requestDetailLookups[this.service.constants.MasterCategories.ZoneMaster].filter(e=>{var t;return e.keyName===(null===(t=this.requestForm.controls.request.get("cityId"))||void 0===t?void 0:t.value)});i&&i.length>0&&(null===(t=this.requestForm.controls.request.get("currentZoneValue"))||void 0===t||t.setValue(i[0].displayText),this.currentZone1=i[0].keyName,this.obj.zoneId=this.currentZone1);const r=this.requestDetailLookups[this.service.constants.MasterCategories.ServiceForMaster].filter(e=>{var t;return e.keyName===(null===(t=this.requestForm.controls.request.get("serviceFor"))||void 0===t?void 0:t.value)});r&&r.length>0&&(null===(o=this.requestForm.controls.request.get("currentClientValue"))||void 0===o||o.setValue(r[0].displayText))}onSave(){var e,t,o,s,i,r,n;if(this.requestForm.valid){const a=this.requestForm.getRawValue();if(console.log(null===(e=this.requestForm.controls.request.get("stageModifiedBy"))||void 0===e?void 0:e.value),25==(null===(t=this.requestForm.controls.request.get("enquiryStatus"))||void 0===t?void 0:t.value)&&(null===(o=this.requestForm.controls.request.get("isInProgress"))||void 0===o||o.setValue(!0)),""==a.request.preferredDate&&(a.request.preferredDate=null),""==a.request.gaugeCalibrationValidityFromDate&&(a.request.gaugeCalibrationValidityFromDate=null),""==a.request.gaugeCalibrationValidityFromTo&&(a.request.gaugeCalibrationValidityFromTos=null),1==a.request.isModify){let e={StageModifiedBy:(null===(s=this.requestForm.controls.request.get("stageModifiedBy"))||void 0===s?void 0:s.value).toString(),SRNumber:null===(i=this.requestForm.controls.request.get("id"))||void 0===i?void 0:i.value};this.service.updateStageModifiedBy(e).subscribe(e=>{console.log(e),this.service.notify.showSuccess(e.data[0].msg)})}else a.request.stageModifiedBy=null===(r=this.service.currentUser)||void 0===r?void 0:r.id.toString(),console.log(null===(n=this.service.currentUser)||void 0===n?void 0:n.id),console.log(a),this.service.saveRequest(a).subscribe(e=>{"success"==e.status?(this.service.notify.showSuccess("Service Request saved successfully"),this.routeUrl.navigate(["/service-requests"])):(console.log(e.errors),e.errors.forEach((e,t)=>{console.log(e.errorMessage),this.service.notify.showSuccess(e.errorMessage)}))})}else this.requestForm.markAllAsTouched(),this.service.notify.showError("Please enter all required fields")}addNewSR(){this.addFormGranted=!0,this.displayModal=!0}onCancel(){this.dialog.open(T.z,{width:"400px",data:{header:"Confirmation",message:"Do you want to cancel your changes?"}}).afterClosed().subscribe(e=>{e&&this.ngOnInit()})}generatePDF(){this.service.JMR(this.requestId).subscribe(e=>{var t,o,s;console.log(e),this.blob=new Blob([e],{type:"application/pdf"});var i=window.URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=1==(null===(t=this.requestForm.controls.request.get("serviceId"))||void 0===t?void 0:t.value)?"JMR_"+(null===(o=this.requestForm.controls.request.get("customerId"))||void 0===o?void 0:o.value):"RFC_"+(null===(s=this.requestForm.controls.request.get("customerId"))||void 0===s?void 0:s.value),r.click()})}saveNotes(){var e;let t=this.addForm.value,o={SRNumber:null===(e=this.requestForm.controls.request.get("id"))||void 0===e?void 0:e.value,ImageData:t.file};this.service.UploadImageOfIsometricGraph(o).subscribe(e=>{console.log(e)}),this.displayModal=!1}onFileSelected(e){const t=e.target.files;if(this.imgName=e.target.files[0].name,t.length>0){const e=t[0],o=new FileReader;o.onload=()=>{const e=o.result.toString().split(",")[1];this.addForm.patchValue({file:e}),this.addForm.patchValue({ImageName:this.imgName})},o.readAsDataURL(e)}}changeStatus(){this.dialog.open(T.z,{width:"500px",data:{header:"Service Request Change Status Confirmation",message:"Are you sure you want to change status of this Service Request to Waiting For Approval?"}}).afterClosed().subscribe(e=>{e&&this.service.changeStatus({id:this.requestId,EnquiryStatus:5}).subscribe(e=>{"success"==e.status?(this.service.notify.showSuccess("Service Request's status changed."),this.routeUrl.navigate([""])):(console.log(e.errors),e.errors.forEach((e,t)=>{console.log(e.errorMessage),this.service.notify.showSuccess(e.errorMessage)}))})})}requestsLists(){this.routeUrl.navigate(["/service-requests"])}callRecordingUpload(){var e;const t=null===(e=this.requestForm.controls.request.get("serviceId"))||void 0===e?void 0:e.value,o=this.requestId;t?this.dialog.open(M,{data:{serviceId:parseInt(t),requestId:o},width:"800px"}).afterClosed().subscribe(e=>{}):this.service.notify.showError("Please select Service in Service Request Details")}uploadCustomerSignature(){var e,t;const o=null===(e=this.requestForm.controls.customerCorrespondenceList)||void 0===e?void 0:e.value,s=null===(t=this.requestForm.controls.request.get("serviceId"))||void 0===t?void 0:t.value,i=this.requestId;s?this.dialog.open(k,{data:{serviceId:parseInt(s),customerCorrespondenceList:o,requestId:i},width:"800px"}).afterClosed().subscribe(e=>{}):this.service.notify.showError("Please select Service in Service Request Details")}viewImage(){var e,t,o,s;const i=null===(e=this.requestForm.controls.documentList)||void 0===e?void 0:e.value,r=null===(t=this.requestForm.controls.request.get("serviceId"))||void 0===t?void 0:t.value,n=this.requestId;console.log(null===(o=this.requestForm.controls.request.get("id"))||void 0===o?void 0:o.value),r?this.dialog.open(G,{data:{serviceId:parseInt(r),documentList:i,requestId:n,SRNumber:null===(s=this.requestForm.controls.request.get("id"))||void 0===s?void 0:s.value},width:"800px"}).afterClosed().subscribe(e=>{}):this.service.notify.showError("Please select Service in Service Request Details")}viewCustomerDetails(){var e,t;const o=null===(e=this.requestForm.controls.request.get("serviceId"))||void 0===e?void 0:e.value,s=null===(t=this.requestForm.controls.request.get("customerId"))||void 0===t?void 0:t.value,i=this.requestId;o?this.dialog.open(D,{data:{serviceId:parseInt(o),requestId:i,customerId:s},width:"800px"}).afterClosed().subscribe(e=>{}):this.service.notify.showError("Please select Service in Service Request Details")}cancelRequest(){this.dialog.open(T.z,{width:"500px",data:{header:"Cancel Service Request Confirmation",message:"Are you sure you want to cancel this Service Request?"}}).afterClosed().subscribe(e=>{e&&this.service.CancelRequest(this.requestId).subscribe(e=>{"success"==e.status?(this.service.notify.showSuccess("Service Request Cancelled."),this.routeUrl.navigate([""])):(console.log(e.error),this.service.notify.showSuccess(e.error))})})}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(C.s),b.Y36(i.gz),b.Y36(a.GW),b.Y36(f.uw),b.Y36(w.e),b.Y36(i.F0))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-request"]],decls:8,vars:11,consts:[["header","Add File","styleClass","searchDialog",3,"position","visible","modal","baseZIndex","draggable","resizable","visibleChange"],["class","formWrap",3,"formGroup","ngSubmit",4,"ngIf"],[1,"manageServiceRequestPage"],[1,"row"],[1,"col-md-12"],[3,"formGroup",4,"ngIf"],[1,"formWrap",3,"formGroup","ngSubmit"],[1,"col-12"],[1,"form-group"],["type","file","formControlName","files",1,"form-control",3,"change"],[1,"btnWrap"],["type","submit","mat-button","","color","primary"],[3,"formGroup"],[1,"col-12","col-md-8","requestFormDataWrap"],["href","javascript:void(0);",3,"click"],[1,"col-12","col-md-4"],["mat-button","","color","primary",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],["type","button","mat-button","","color","primary",3,"click"],["mat-tab-label",""],["matTabContent",""],[1,"btnWrap","mt-4"],["mat-button","","color","secondary","type","button",3,"disabled","click"],["mat-button","","color","primary","type","submit",3,"disabled","click"],[3,"requestId","requestForm","lookups","obj"],[3,"requestId","requestForm"]],template:function(e,t){1&e&&(b.TgZ(0,"p-dialog",0),b.NdJ("visibleChange",function(e){return t.displayModal=e}),b.YNc(1,It,11,1,"form",1),b.qZA(),b.TgZ(2,"section",2),b.TgZ(3,"div",3),b.TgZ(4,"div",4),b.TgZ(5,"h1"),b._uU(6,"Manage Service Request"),b.qZA(),b.qZA(),b.qZA(),b.YNc(7,Dt,69,14,"form",5),b.qZA()),2&e&&(b.Akn(b.DdM(10,Pt)),b.Q6J("position","right")("visible",t.displayModal)("modal",!0)("baseZIndex",-100)("draggable",!1)("resizable",!1),b.xp6(1),b.Q6J("ngIf",t.addFormGranted),b.xp6(6),b.Q6J("ngIf",t.requestForm))},directives:[j.V,s.O5,r._Y,r.JL,a.w5,r.sg,a.Yi,a.A3,r.Fj,a.x0,a.bf,r.JJ,r.u,I.lW,H.p6,W.Hw,H.VK,H.OP,z.SP,z.uX,z.uD,z.Vc,$.a8,le,Ve,Xe,wt],styles:[".manageServiceRequestPage[_ngcontent-%COMP%]   .requestFormDataWrap[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;margin:4px 0 20px}.manageServiceRequestPage[_ngcontent-%COMP%]   .requestFormDataWrap[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .manageServiceRequestPage[_ngcontent-%COMP%]   .requestFormDataWrap[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;padding:6px 10px;border:1px solid #ffd400;background-color:#fff}.manageServiceRequestPage[_ngcontent-%COMP%]   .requestFormDataWrap[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#ffd400}.manageServiceRequestPage[_ngcontent-%COMP%]   .requestFormDataWrap[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:20px}"]}),e})();var Ot=o(6461),Vt=o(2593);function Yt(e,t){if(1&e&&(b.TgZ(0,"div",6),b.TgZ(1,"label"),b._uU(2,"Service Status"),b.qZA(),b._UZ(3,"p-dropdown",9),b.qZA()),2&e){const e=b.oxw(2);b.xp6(3),b.Q6J("options",e.ServiceStageMasterArr)}}function Jt(e,t){1&e&&(b.TgZ(0,"div",6),b.TgZ(1,"label"),b._uU(2,"Calling Remark"),b.qZA(),b._UZ(3,"textarea",10,11),b.qZA())}function Lt(e,t){if(1&e&&(b.TgZ(0,"div",6),b.TgZ(1,"label"),b._uU(2,"Preferred Date"),b.qZA(),b._UZ(3,"input",12),b.qZA()),2&e){const e=b.oxw(2);b.xp6(3),b.s9C("value",e.data.enquiryData.preferredDate)}}function Qt(e,t){if(1&e&&(b.TgZ(0,"div",6),b.TgZ(1,"label"),b._uU(2,"Gas Status"),b.qZA(),b._UZ(3,"p-dropdown",13),b.qZA()),2&e){const e=b.oxw(2);b.xp6(3),b.Q6J("options",e.PlanMasteArr)}}function Et(e,t){if(1&e&&(b.TgZ(0,"div",6),b.TgZ(1,"label"),b._uU(2,"Priority"),b.qZA(),b._UZ(3,"p-dropdown",14),b.qZA()),2&e){const e=b.oxw(2);b.xp6(3),b.Q6J("options",e.ServicePriorityArr)}}function Bt(e,t){if(1&e&&(b.TgZ(0,"form",4),b.TgZ(1,"div",5),b.TgZ(2,"div",6),b.TgZ(3,"label"),b._uU(4,"Choose a field the dropdown and update with new information"),b.qZA(),b._UZ(5,"p-dropdown",7),b.qZA(),b.YNc(6,Yt,4,1,"div",8),b.YNc(7,Jt,5,0,"div",8),b.YNc(8,Lt,4,1,"div",8),b.YNc(9,Qt,4,1,"div",8),b.YNc(10,Et,4,1,"div",8),b.qZA(),b.qZA()),2&e){const e=b.oxw();b.Q6J("formGroup",e.updateSR),b.xp6(5),b.Q6J("options",e.EmployeeArr),b.xp6(1),b.Q6J("ngIf",e.EnquiryStatus),b.xp6(1),b.Q6J("ngIf",e.Description),b.xp6(1),b.Q6J("ngIf",e.PreferredDate),b.xp6(1),b.Q6J("ngIf",e.GasStatus),b.xp6(1),b.Q6J("ngIf",e.Priority)}}let Gt=(()=>{class e{constructor(e,t,o,s,i,r){this.formBuilder=e,this.service1=t,this.service=o,this.fb=s,this.data=i,this.dialogRef=r,this.apiUrl=y.N.apiUrl,this.EmployeeArr=[{id:"GasStatus",name:"Gas Status"},{id:"EnquiryStatus",name:"Enquiry Status"},{id:"PreferredDate",name:"Preferred Date"},{id:"Description",name:"Calling Remark"},{id:"Priority",name:"Priority"}],this.GasStatus=!1,this.EnquiryStatus=!1,this.PreferredDate=!1,this.Description=!1,this.Priority=!1,this.isEnquiryStatus=!0}ngOnInit(){console.log("In 1-",this.data.type),1==this.data.type?(5!=this.data.enquiryData[0].enquiryStatusId&&(this.EmployeeArr=[{id:"GasStatus",name:"Gas Status"},{id:"PreferredDate",name:"Preferred Date"},{id:"Description",name:"Calling Remark"},{id:"Priority",name:"Priority"}]),this.updateSR=this.fb.group({dropdownID:[null],enquiryStatus:[this.data.enquiryData[0].enquiryStatusId],gasStatus:[this.data.enquiryData[0].planId],priority:[this.data.enquiryData[0].priorityId],preferredDate:[null!=this.data.enquiryData[0].preferredDate?this.service.Moment(this.data.enquiryData[0].preferredDate).format("YYYY-MM-DD"):null],callingRemark:[this.data.enquiryData[0].description]})):this.vall(this.data.enquiryData),this.detectValueChanges(),this.bindDropdowns()}vall(e){e.forEach(e=>{26!=e.enquiryStatusId&&"26"!=e.enquiryStatusId||(this.isEnquiryStatus=!1)}),this.updateSR=this.fb.group({dropdownID:[null],enquiryStatus:[null],gasStatus:[null],priority:[null],preferredDate:[null],callingRemark:[null]}),this.isEnquiryStatus||(this.EmployeeArr=[{id:"GasStatus",name:"Gas Status"},{id:"PreferredDate",name:"Preferred Date"},{id:"Description",name:"Calling Remark"},{id:"Priority",name:"Priority"}])}bindDropdowns(){this.service.getLookups([this.service.constants.MasterCategories.ServiceStageMaster,this.service.constants.MasterCategories.PlanMaster,this.service.constants.LookupCategories.ServicePriority],e=>{this.PlanMasteArr=e[this.service.constants.MasterCategories.PlanMaster];const t=e[this.service.constants.MasterCategories.ServiceStageMaster];this.ServicePriorityArr=e[this.service.constants.LookupCategories.ServicePriority],this.ServiceStageMasterArr=this.service.getStatusDropdownValuesForSRList(this.data.enquiryData[0].enquiryStatusId,t,this.data.enquiryData[0].serviceId)})}detectValueChanges(){var e;null===(e=this.updateSR.get("dropdownID"))||void 0===e||e.valueChanges.subscribe(e=>{this.GasStatus="GasStatus"==e,this.EnquiryStatus="EnquiryStatus"==e,this.PreferredDate="PreferredDate"==e,this.Description="Description"==e,this.Priority="Priority"==e})}editSR(){const e=this.updateSR.getRawValue();let t=this.data.enquiryData.map(e=>e.enquiryId);this.service1.srListUpdate({enquiryId:t,planId:e.gasStatus,enquiryStatus:e.enquiryStatus,preferredDate:""==e.preferredDate?null:e.preferredDate,description:e.callingRemark,priority:e.priority}).subscribe(e=>{"success"==e.status?(this.service.notify.showSuccess("Service Request Edit successfully"),this.dialogRef.close()):this.service.notify.showSuccess(e.error)})}cancel(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.GW),b.Y36(C.s),b.Y36(K.r),b.Y36(r.qu),b.Y36(f.WI),b.Y36(f.so))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-sr-list-update"]],inputs:{requestId:"requestId",requestForm:"requestForm"},decls:11,vars:1,consts:[[1,"mat-dialog-title"],["class","formWrap",3,"formGroup",4,"ngIf"],["mat-stroked-button","","color","secondary",3,"click"],["mat-button","","color","primary",3,"click"],[1,"formWrap",3,"formGroup"],[1,"row"],[1,"col-6"],["appendTo","body","formControlName","dropdownID","optionValue","id","optionLabel","name","placeholder","-Select-",1,"ui-input",3,"options"],["class","col-6",4,"ngIf"],["appendTo","body","optionValue","keyName","formControlName","enquiryStatus","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options"],["pInputText","","formControlName","callingRemark","required","","maxlength","200"],["delayReason",""],["type","date","formControlName","preferredDate",1,"form-control",3,"value"],["appendTo","body","optionValue","keyName","formControlName","gasStatus","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options"],["appendTo","body","optionValue","keyName","formControlName","priority","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options"]],template:function(e,t){1&e&&(b.TgZ(0,"div"),b.TgZ(1,"div",0),b._uU(2,"Edit Service Requests"),b.qZA(),b.TgZ(3,"mat-dialog-content"),b.YNc(4,Bt,11,7,"form",1),b.qZA(),b.qZA(),b.TgZ(5,"mat-dialog-actions"),b.TgZ(6,"div"),b.TgZ(7,"button",2),b.NdJ("click",function(){return t.cancel()}),b._uU(8,"Cancel"),b.qZA(),b.TgZ(9,"button",3),b.NdJ("click",function(){return t.editSR()}),b._uU(10,"Submit"),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(4),b.Q6J("ngIf",t.updateSR))},directives:[f.xY,s.O5,f.H8,I.lW,r._Y,r.JL,a.w5,r.sg,X.Lt,a.x0,a.bf,r.JJ,r.u,r.Fj,r.Q7,r.nD],styles:[""]}),e})();var jt=o(8618),Ht=o(1281);function Wt(e,t){1&e&&(b.TgZ(0,"tr",9),b._UZ(1,"th",10),b.TgZ(2,"th",10),b._uU(3," EmployeeCode "),b.qZA(),b.TgZ(4,"th",10),b._uU(5," EmployeeName "),b.qZA(),b.TgZ(6,"th",10),b._uU(7," ServiceName "),b.qZA(),b.TgZ(8,"th",10),b._uU(9," Mobile "),b.qZA(),b.TgZ(10,"th",10),b._uU(11," Zone "),b.qZA(),b.TgZ(12,"th",10),b._uU(13," Location "),b.qZA(),b.TgZ(14,"th",10),b._uU(15," Assignments "),b.qZA(),b.qZA())}function zt(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"tr",9),b.TgZ(1,"td"),b.TgZ(2,"mat-checkbox",12),b.NdJ("change",function(t){b.CHM(e);const o=b.oxw().$implicit;return b.oxw().onChkChildChange(t,o.employeeCode)}),b.qZA(),b.qZA(),b.TgZ(3,"td"),b._uU(4),b.qZA(),b.TgZ(5,"td"),b._uU(6),b.qZA(),b.TgZ(7,"td"),b._uU(8),b.qZA(),b.TgZ(9,"td"),b._uU(10),b.qZA(),b.TgZ(11,"td"),b._uU(12),b.qZA(),b.TgZ(13,"td"),b._uU(14),b.qZA(),b.TgZ(15,"td"),b._uU(16),b.qZA(),b.qZA()}if(2&e){const e=b.oxw().$implicit;b.xp6(2),b.Q6J("checked",e.isSelect),b.xp6(2),b.Oqu(e.employeeCode),b.xp6(2),b.Oqu(e.employeeName),b.xp6(2),b.Oqu(e.serviceName),b.xp6(2),b.Oqu(e.mobile),b.xp6(2),b.hij(" ",e.serviceCities,""),b.xp6(2),b.Oqu(e.worklocations),b.xp6(2),b.Oqu(e.assignements)}}function $t(e,t){1&e&&b.YNc(0,zt,17,8,"tr",11),2&e&&b.Q6J("ngIf",!t.$implicit.isDeleted)}function Kt(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",13),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}let Xt=(()=>{class e{constructor(e,t,o,s,i,r,n){this.formBuilder=e,this.service1=t,this.service2=o,this.service=s,this.fb=i,this.data=r,this.dialogRef=n}ngOnInit(){this.service1.GetManpowerForBulkAssigned({serviceIds:[this.data.enquiryData[0].serviceId],zones:[this.data.enquiryData[0].cityId]}).subscribe(e=>{"success"==e.status&&(this.getSRAvailableManpower=e.data.result)})}onChkChildChange(e,t){console.log(e.checked),console.log(t),this.getSRAvailableManpower.forEach(e=>{e.isSelect=!1}),1==e.checked?(this.getSRAvailableManpowerSelec=this.getSRAvailableManpower.filter(e=>e.employeeCode==t)[0],this.getSRAvailableManpower.forEach(e=>{e.employeeCode==this.getSRAvailableManpowerSelec.employeeCode&&(e.isSelect=!0)})):this.getSRAvailableManpowerSelec="",console.log(this.getSRAvailableManpowerSelec)}addAssignedManpower(){if(console.log(this.data.enquiryData),console.log(this.getSRAvailableManpowerSelec),this.getSRAvailableManpowerSelec){let e=[];this.data.enquiryData.forEach(t=>{e.push(t.enquiryId)}),this.service1.SaveManpowerForBulkAssigned({srNumbers:e,manpowerId:this.getSRAvailableManpowerSelec.employeeID}).subscribe(e=>{"success"==e.status?(this.service.notify.showError("Manpower Assigned Successfully"),this.cancel()):e.errors.forEach((e,t)=>{console.log(e.errorMessage),this.service.notify.showSuccess(e.errorMessage)})})}else this.service.notify.showError("Please select Assigned Manpower")}cancel(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(a.GW),b.Y36(Ht.f),b.Y36(C.s),b.Y36(K.r),b.Y36(r.qu),b.Y36(f.WI),b.Y36(f.so))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-assign-manpower-bulk"]],inputs:{requestId:"requestId",requestForm:"requestForm"},decls:14,vars:1,consts:[[1,"mat-dialog-title"],["dataKey","id",1,"pTable","selectManpower",3,"value"],["openingTaskDetails",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"btnWrap"],["mat-button","","color","secondary",3,"click"],["mat-button","","color","primary",3,"click"],[1,"searchTr"],["id","header"],["class","searchTr",4,"ngIf"],[3,"checked","change"],["colspan","6"]],template:function(e,t){1&e&&(b.TgZ(0,"div",0),b._uU(1,"Assigned Manpower"),b.qZA(),b.TgZ(2,"mat-dialog-content"),b.TgZ(3,"p-table",1,2),b.YNc(5,Wt,16,0,"ng-template",3),b.YNc(6,$t,1,1,"ng-template",4),b.YNc(7,Kt,3,0,"ng-template",5),b.qZA(),b.qZA(),b.TgZ(8,"mat-dialog-actions"),b.TgZ(9,"div",6),b.TgZ(10,"button",7),b.NdJ("click",function(){return t.cancel()}),b._uU(11,"Cancel"),b.qZA(),b.TgZ(12,"button",8),b.NdJ("click",function(){return t.addAssignedManpower()}),b._uU(13,"Submit"),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(3),b.Q6J("value",t.getSRAvailableManpower))},directives:[f.xY,P.iA,R.jx,f.H8,I.lW,s.O5,it.oG],styles:["tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:400px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:80px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:100px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:80px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:200px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7){width:120px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8){width:80px}"]}),e})();var eo=o(6738),to=o(1436),oo=o(8341),so=o(6949),io=o(6639);const ro=["customerId"];function no(e,t){1&e&&(b.TgZ(0,"mat-icon",41),b._uU(1,"cancel"),b.qZA())}function ao(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"mat-chip",39),b.NdJ("removed",function(){const t=b.CHM(e).$implicit;return b.oxw(2).removeSR(t)}),b._uU(1),b.YNc(2,no,2,0,"mat-icon",40),b.qZA()}if(2&e){const e=t.$implicit,o=b.oxw(2);b.Q6J("selectable",o.selectable)("removable",o.removable),b.xp6(1),b.hij(" ",e," "),b.xp6(1),b.Q6J("ngIf",o.removable)}}function lo(e,t){1&e&&(b.TgZ(0,"mat-icon",41),b._uU(1,"cancel"),b.qZA())}function uo(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"mat-chip",39),b.NdJ("removed",function(){const t=b.CHM(e).$implicit;return b.oxw(2).removeCustomerId(t)}),b._uU(1),b.YNc(2,lo,2,0,"mat-icon",40),b.qZA()}if(2&e){const e=t.$implicit,o=b.oxw(2);b.Q6J("selectable",o.selectable)("removable",o.removable),b.xp6(1),b.hij(" ",e," "),b.xp6(1),b.Q6J("ngIf",o.removable)}}function co(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"form",19),b.NdJ("keydown.enter",function(){return b.CHM(e),b.oxw().search()}),b.TgZ(1,"div",1),b.TgZ(2,"div",2),b.TgZ(3,"div",20),b.TgZ(4,"label"),b._uU(5,"Service Request Number"),b.qZA(),b.TgZ(6,"input",21),b.NdJ("matChipInputTokenEnd",function(t){return b.CHM(e),b.oxw().add(t)}),b.qZA(),b.TgZ(7,"div",22),b.TgZ(8,"mat-chip-list",23,24),b.YNc(10,ao,3,4,"mat-chip",25),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(11,"div",1),b.TgZ(12,"div",2),b.TgZ(13,"div",20),b.TgZ(14,"label"),b._uU(15,"Customers ID"),b.qZA(),b.TgZ(16,"input",26),b.NdJ("matChipInputTokenEnd",function(t){return b.CHM(e),b.oxw().addCustomerId(t)}),b.qZA(),b.TgZ(17,"div",22),b.TgZ(18,"mat-chip-list",27,28),b.YNc(20,uo,3,4,"mat-chip",25),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.qZA(),b.TgZ(21,"div",1),b.TgZ(22,"div",2),b.TgZ(23,"div",20),b.TgZ(24,"label"),b._uU(25,"Mobile"),b.qZA(),b._UZ(26,"p-inputMask",29),b.qZA(),b.qZA(),b.qZA(),b.TgZ(27,"div",1),b.TgZ(28,"div",2),b.TgZ(29,"div",20),b.TgZ(30,"label"),b._uU(31,"Service Name"),b.qZA(),b._UZ(32,"p-multiSelect",30),b.qZA(),b.qZA(),b.qZA(),b.TgZ(33,"div",1),b.TgZ(34,"div",2),b.TgZ(35,"div",20),b.TgZ(36,"label"),b._uU(37,"Request From"),b.qZA(),b._UZ(38,"input",31),b.qZA(),b.qZA(),b.qZA(),b.TgZ(39,"div",1),b.TgZ(40,"div",2),b.TgZ(41,"div",20),b.TgZ(42,"label"),b._uU(43,"Request To"),b.qZA(),b._UZ(44,"input",32),b.qZA(),b.qZA(),b.qZA(),b.TgZ(45,"div",1),b.TgZ(46,"div",2),b.TgZ(47,"div",20),b.TgZ(48,"label"),b._uU(49,"Zone"),b.qZA(),b._UZ(50,"p-multiSelect",33),b.qZA(),b.qZA(),b.qZA(),b.TgZ(51,"div",1),b.TgZ(52,"div",2),b.TgZ(53,"div",20),b.TgZ(54,"label"),b._uU(55,"Priority"),b.qZA(),b._UZ(56,"p-dropdown",34),b.qZA(),b.qZA(),b.qZA(),b.TgZ(57,"div",1),b.TgZ(58,"div",2),b.TgZ(59,"div",20),b.TgZ(60,"label"),b._uU(61,"Status"),b.qZA(),b._UZ(62,"p-multiSelect",35),b.qZA(),b.qZA(),b.qZA(),b.TgZ(63,"div",36),b.TgZ(64,"div"),b.TgZ(65,"button",37),b.NdJ("click",function(){return b.CHM(e),b.oxw().reset()}),b._uU(66,"Reset"),b.qZA(),b.TgZ(67,"button",38),b.NdJ("click",function(){return b.CHM(e),b.oxw().search()}),b._uU(68,"Search"),b.qZA(),b.qZA(),b.qZA(),b.qZA()}if(2&e){const e=b.MAs(9),t=b.MAs(19),o=b.oxw();b.Q6J("formGroup",o.searchForm),b.xp6(6),b.Q6J("matChipInputFor",e)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("matChipInputAddOnBlur",o.addOnBlur),b.xp6(1),b.Q6J("ngClass",o.filteredSRNumbers.length>0?"chipContainer":""),b.xp6(3),b.Q6J("ngForOf",o.filteredSRNumbers),b.xp6(6),b.Q6J("matChipInputFor",t)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("matChipInputAddOnBlur",o.addOnBlur),b.xp6(1),b.Q6J("ngClass",o.filteredCustomers.length>0?"chipContainer":""),b.xp6(3),b.Q6J("ngForOf",o.filteredCustomers),b.xp6(12),b.Q6J("options",o.serviceNames),b.xp6(18),b.Q6J("options",o.zones),b.xp6(6),b.Q6J("options",o.priorities),b.xp6(6),b.Q6J("options",o.statuses)}}function go(e,t){1&e&&(b.TgZ(0,"mat-icon",41),b._uU(1,"cancel"),b.qZA())}function po(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"mat-chip",45),b.NdJ("removed",function(){const t=b.CHM(e).$implicit;return b.oxw(2).removeSearching(t)}),b._uU(1),b.YNc(2,go,2,0,"mat-icon",40),b.qZA()}if(2&e){const e=t.$implicit,o=b.oxw(2);b.Q6J("selectable",o.selectable)("removable",o.removable),b.xp6(1),b.hij(" ",e," "),b.xp6(1),b.Q6J("ngIf",o.removable)}}function mo(e,t){if(1&e&&(b.TgZ(0,"div",42),b.TgZ(1,"label"),b._uU(2,"Search"),b.qZA(),b.TgZ(3,"div",43),b.TgZ(4,"mat-chip-list",23,24),b.YNc(6,po,3,4,"mat-chip",44),b.qZA(),b.qZA(),b.qZA()),2&e){const e=b.oxw();b.xp6(6),b.Q6J("ngForOf",e.displayArr)}}function ho(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"div",46),b.TgZ(1,"div"),b.TgZ(2,"p-button",47),b.NdJ("click",function(){return b.CHM(e),b.oxw().exportCSV()}),b.qZA(),b.TgZ(3,"button",48),b.NdJ("click",function(){return b.CHM(e),b.oxw().Bulk_Upload(2)}),b._uU(4,"Bulk Update"),b.qZA(),b.TgZ(5,"button",48),b.NdJ("click",function(){return b.CHM(e),b.oxw().AssignmanpowerBulk(2)}),b._uU(6,"Assign Manpower"),b.qZA(),b._uU(7,"\xa0 "),b.TgZ(8,"input",49),b.NdJ("input",function(t){return b.CHM(e),b.oxw().searchbox(t.target.value)}),b.qZA(),b.qZA(),b.qZA()}}function vo(e,t){if(1&e&&b._UZ(0,"p-sortIcon",55),2&e){const e=b.oxw().$implicit;b.Q6J("field",e.field)}}function qo(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"th",53),b.NdJ("click",function(){const t=b.CHM(e).$implicit;return b.oxw(2).sotingData(t.field)}),b._uU(1),b.YNc(2,vo,1,1,"p-sortIcon",54),b.qZA()}if(2&e){const e=t.$implicit;b.Q6J("pSortableColumn",e.field),b.xp6(1),b.hij(" ",e.header," "),b.xp6(1),b.Q6J("ngIf","action"!=e.field)}}function Zo(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"tr",50),b.TgZ(1,"th"),b.TgZ(2,"mat-checkbox",51),b.NdJ("change",function(t){return b.CHM(e),b.oxw().onChkChildChange1(t)}),b.qZA(),b.qZA(),b.YNc(3,qo,3,3,"th",52),b.qZA()}if(2&e){const e=t.$implicit,o=b.oxw();b.xp6(2),b.Q6J("checked",o.isAllSelect),b.xp6(1),b.Q6J("ngForOf",e)}}const To=function(e){return["request",e]};function yo(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"tr",50),b.TgZ(1,"td"),b.TgZ(2,"mat-checkbox",51),b.NdJ("change",function(t){const o=b.CHM(e).$implicit;return b.oxw().onChkChildChange(t,o.enquiryId)}),b.qZA(),b.qZA(),b.TgZ(3,"td"),b.TgZ(4,"a",56),b._uU(5),b.qZA(),b.qZA(),b.TgZ(6,"td"),b._uU(7),b.qZA(),b.TgZ(8,"td"),b._uU(9),b.TgZ(10,"i",57),b.NdJ("click",function(){const t=b.CHM(e).$implicit;return b.oxw().callPhone(t.enquiryId,t.mobileNo)}),b.qZA(),b.qZA(),b.TgZ(11,"td"),b._uU(12),b.qZA(),b.TgZ(13,"td"),b._uU(14),b.qZA(),b.TgZ(15,"td"),b._uU(16),b.qZA(),b.TgZ(17,"td"),b._uU(18),b.qZA(),b.TgZ(19,"td"),b._uU(20),b.qZA(),b.TgZ(21,"td",58),b._uU(22),b.qZA(),b.TgZ(23,"td",58),b._uU(24),b.qZA(),b.TgZ(25,"td"),b._uU(26),b.qZA(),b.TgZ(27,"td"),b._uU(28),b.qZA(),b.TgZ(29,"td"),b._uU(30),b.qZA(),b.TgZ(31,"td"),b._uU(32),b.qZA(),b.qZA()}if(2&e){const e=t.$implicit,o=b.oxw();b.xp6(2),b.Q6J("checked",e.isSelect),b.xp6(2),b.Q6J("routerLink",b.VKq(16,To,e.enquiryId)),b.xp6(1),b.Oqu(e.enquiryId),b.xp6(2),b.Oqu(e.customerId),b.xp6(2),b.hij("",e.mobileNo," "),b.xp6(3),b.Oqu(e.contactNo),b.xp6(2),b.Oqu(e.houseNo),b.xp6(2),b.Oqu(e.society),b.xp6(2),b.Oqu(e.area),b.xp6(2),b.Oqu(e.enquiryStatus),b.xp6(2),b.Oqu(e.description),b.xp6(2),b.Oqu(e.delayReason),b.xp6(2),b.hij("",null!=e.enquiryDate?o.service.Moment(e.enquiryDate).format("MM-DD-YYYY"):""," "),b.xp6(2),b.Oqu(null!=e.preferredDate?o.service.Moment(e.preferredDate).format("MM-DD-YYYY"):""),b.xp6(2),b.Oqu(e.planName),b.xp6(2),b.Oqu(e.priorityName)}}function fo(e,t){1&e&&(b.TgZ(0,"tr"),b.TgZ(1,"td",59),b._uU(2,"No Record Found."),b.qZA(),b.qZA())}const Ao=function(){return[10,20,30]};function bo(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"div",60),b.TgZ(1,"p-paginator",61),b.NdJ("onPageChange",function(t){return b.CHM(e),b.oxw().paginate(t)}),b.qZA(),b.qZA()}if(2&e){const e=b.oxw();b.xp6(1),b.Q6J("rows",10)("totalRecords",e.totalRecords)("rowsPerPageOptions",b.DdM(3,Ao))}}const Co=function(){return{width:"20vw"}},wo=function(){return[]},Io=[{path:"",component:(()=>{class e{constructor(e,t,o,s,i){this.service=e,this.authService=t,this.formBuilder=o,this.dialog=s,this.location=i,this.oldUrl=y.N.oldUrl,this.getbulkSelect=[],this.zonesAll=[],this.filteredCustomers=[],this.filteredSRNumbers=[],this.displayArr=[],this.statusIdsName=[],this.zonesName=[],this.serviceIdsName=[],this.isgeneratePDFs=!1,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.paginateData=[0,10],this.paginateDataedit=[0,10],this.totalRecords=0,this.sotingname="",this.OrderBy="Asc",this.textsearch="",this.isAllSelect=!1,this.separatorKeysCodes=[Ot.K5,Ot.OC]}ngOnInit(){this.dashboardSearch=this.location.getState();const e=JSON.parse(localStorage.getItem("currentUser")||"{}");1!=e.roleID&&2!=e.roleID||(this.isgeneratePDFs=!0),this.bindColumns(),this.bindDropdowns()}bindDropdowns(){this.service.getLookups([this.service.constants.LookupCategories.ServicePriority,this.service.constants.LookupCategories.PreferredTime,this.service.constants.MasterCategories.ServiceMaster,this.service.constants.MasterCategories.ServiceStageMaster,this.service.constants.MasterCategories.ZoneMaster],e=>{console.log(JSON.stringify(e)),e&&(this.priorities=e[this.service.constants.LookupCategories.ServicePriority],this.serviceNames=e[this.service.constants.MasterCategories.ServiceMaster],this.statuses=e[this.service.constants.MasterCategories.ServiceStageMaster],this.zones=e[this.service.constants.MasterCategories.ZoneMaster]),this.statuses.findIndex(e=>"27"==e.keyName)&&this.statuses.splice(this.statuses.findIndex(e=>"27"==e.keyName),1)}),this.initialize()}showBasicDialog(){this.displayModal=!0}bindColumns(){this.cols=[{header:"SR Number",field:"enquiryId"},{header:"Customer ID",field:"customerId"},{header:"Mobile Number",field:"mobileNo"},{header:"Alt. Number",field:"contactNo"},{header:"House No.",field:"houseNo"},{header:"Society",field:"society"},{header:"Area",field:"area"},{header:"Status",field:"enquiryStatusId"},{header:"Calling Remark",field:"description"},{header:"Visit Remark",field:"delayReason"},{header:"Enquiry Date",field:"enquiryDate"},{header:"Preffered Date",field:"preferredDate"},{header:"Gas Status",field:"planName"},{header:"Priority",field:"priorityName"}]}sotingData(e){"action"!=e&&(this.OrderBy=this.sotingname!=e||"Desc"==this.OrderBy?"Asc":"Desc",this.sotingname=e,this.paginateData[0]=this.paginateDataedit[0],this.paginateData[1]=this.paginateDataedit[1],this.search())}initialize(){var e,t,o,s,i,r;console.log("this.dashboardSearch"),console.log(this.dashboardSearch);const n=new Vt.I;this.searchForm=this.formBuilder.formGroup(n),(this.dashboardSearch.statusIds||null==this.dashboardSearch.statusIds)&&(null===(e=this.searchForm.get("statusIds"))||void 0===e||e.setValue(this.dashboardSearch.statusIds),null===(t=this.searchForm.get("zones"))||void 0===t||t.setValue(this.dashboardSearch.zones),null===(o=this.searchForm.get("serviceIds"))||void 0===o||o.setValue(this.dashboardSearch.serviceIds),null===(s=this.searchForm.get("serviceForId"))||void 0===s||s.setValue(this.dashboardSearch.serviceForId),""!=this.dashboardSearch.requestFrom&&(null===(i=this.searchForm.get("requestFrom"))||void 0===i||i.setValue(this.dashboardSearch.requestFrom),null===(r=this.searchForm.get("requestTo"))||void 0===r||r.setValue(this.dashboardSearch.requestTo))),setTimeout(()=>{this.search()},600)}reset(){this.searchForm.reset(),this.displayArr=[],this.filteredCustomers=[],this.filteredSRNumbers=[],this.totalRecords=0,this.serviceRequests=new Array}callPhone(e,t){this.service.callPhone(e).subscribe(e=>{console.log(e),"success"==e.status&&this.service.makecall({k_number:"+919513309915",customer_number:"+91"+t,caller_id:"+918035390130",additional_params:{SRNo:e.data}}).subscribe(e=>{console.log(e),this.service.notify.showSuccess(e.success.message)})})}srListUpdate(e,t){0!=e.length?this.dialog.open(Gt,{data:{enquiryData:[e],type:t},width:"800px"}).afterClosed().subscribe(e=>{console.log(e),this.paginateData[0]=this.paginateDataedit[0],this.paginateData[1]=this.paginateDataedit[1],this.search()}):this.service.notify.showError("Please select Service in Service Request Details")}search(){if(this.isAllSelect=!1,this.getbulkSelect=[],this.searchForm.valid){console.log(this.statuses),this.displayModal=!1;let t=this.searchForm.getRawValue();if(console.log(t),this.searchData={customerIds:this.filteredCustomers,srNumbers:this.filteredSRNumbers,mobile:t.mobile,priority:t.priority,requestFrom:t.requestFrom,requestTo:t.requestTo,serviceIds:t.serviceIds&&t.serviceIds.length>0?t.serviceIds:[],statusIds:t.statusIds&&t.statusIds.length>0?t.statusIds:[],zones:t.zones&&t.zones.length>0?t.zones:[],take:this.paginateData[1],skip:this.paginateData[0],OrderBy:""==this.sotingname?"enquiryId":this.sotingname+" "+this.OrderBy,search:this.textsearch,serviceForId:t.serviceForId},this.displayArr=[],null!=this.filteredSRNumbers&&this.filteredSRNumbers.length>0){var e="Service Request Number:"+this.filteredSRNumbers.join(",");this.displayArr.push(e)}null!=this.filteredCustomers&&this.filteredCustomers.length>0&&(e="Customers:"+this.filteredCustomers.join(","),this.displayArr.push(e)),null!=t.mobile&&""!=t.mobile&&this.displayArr.push(e="Mobile:"+t.mobile),console.log(t.serviceIds),null!=t.serviceIds&&""!=t.serviceIds&&(this.serviceIdsName=[],this.searchData.serviceIds.forEach((e,t)=>{this.serviceNames.forEach(t=>{t.keyName.includes(e)&&t.keyName===e&&this.serviceIdsName.push(t.displayText)})}),e="Service Name:"+this.serviceIdsName.join(","),this.displayArr.push(e)),null!=t.requestFrom&&null!=t.requestTo?(e="Date: Between "+this.service.Moment(t.requestFrom).format("MM-DD-YYYY")+" To "+this.service.Moment(t.requestTo).format("MM-DD-YYYY"),this.displayArr.push(e)):null!=t.requestFrom?(e="Date: From "+this.service.Moment(t.requestFrom).format("MM-DD-YYYY"),this.displayArr.push(e)):null!=t.requestTo&&(e="Date: To "+this.service.Moment(t.requestTo).format("MM-DD-YYYY"),this.displayArr.push(e)),null!=t.zones&&""!=t.zones&&(this.zonesName=[],this.searchData.zones.forEach((e,t)=>{this.zones.forEach(t=>{t.keyName.includes(e)&&t.keyName===e&&this.zonesName.push(t.displayText)})}),e="Zones:"+this.zonesName.join(","),this.displayArr.push(e)),null!=t.priority&&""!=t.priority&&(e="Priority:"+this.priorities.filter(e=>e.keyName==t.priority)[0].displayText,this.displayArr.push(e)),null!=t.statusIds&&""!=t.statusIds&&(this.statusIdsName=[],this.searchData.statusIds.forEach((e,t)=>{this.statuses.forEach(t=>{t.keyName.includes(e)&&t.keyName===e&&this.statusIdsName.push(t.displayText)})}),e="Status:"+this.statusIdsName.join(","),this.displayArr.push(e)),this.service.search(this.searchData).subscribe(e=>{e&&e.data&&e.data.searchSRResult.length>0?(this.serviceRequests=e.data.searchSRResult,this.paginateData[0]=0,this.totalRecords=e.data.rowCount):(this.serviceRequests=[],this.paginateData[0]=0,this.totalRecords=0)})}else this.service.notify.showError("Please enter the criteria")}removeCustomerId(e){var t;const o=this.filteredCustomers.indexOf(e);o>=0&&(this.filteredCustomers.splice(o,1),null===(t=this.searchForm.get("customerIds"))||void 0===t||t.setValue(this.filteredCustomers))}generatePDFs(){this.service.BulkGeneratePDF().subscribe(e=>{"success"==e.status&&this.service.notify.showSuccess("PDF generated successfully"),console.log(e)})}addNewSR(){window.open(this.oldUrl+"/Account/LoginApp?page=CreateSR&token="+this.authService.currentUserValue.token,"_blank")}removeSearching(e){var t,o,s,i,r,n,a,l,u,d;if(this.displayArr.indexOf(e)>=0){var c=e.split(":");"Date"==c[0]?(null===(t=this.searchForm.get("requestFrom"))||void 0===t||t.setValue(null),null===(o=this.searchForm.get("requestTo"))||void 0===o||o.setValue(null)):"Service Request Number"==c[0]?(null===(s=this.searchForm.get("srNumbers"))||void 0===s||s.setValue(null),this.filteredSRNumbers=[]):"Customers"==c[0]?(null===(i=this.searchForm.get("customerIds"))||void 0===i||i.setValue(null),this.filteredCustomers=[]):"Mobile"==c[0]?null===(r=this.searchForm.get("mobile"))||void 0===r||r.setValue(null):"Service Name"==c[0]?null===(n=this.searchForm.get("serviceIds"))||void 0===n||n.setValue(null):"Zones"==c[0]?null===(a=this.searchForm.get("zones"))||void 0===a||a.setValue(null):"Priority"==c[0]?null===(l=this.searchForm.get("priority"))||void 0===l||l.setValue(null):"Status"==c[0]?null===(u=this.searchForm.get("statusIds"))||void 0===u||u.setValue(null):("srNumbers"==c[0]||"customerIds"==c[0]&&(this.filteredCustomers=[]),null===(d=this.searchForm.get(c[0]))||void 0===d||d.setValue(null)),this.search()}}addCustomerId(e){var t;const o=(e.value||"").trim();o&&(this.filteredCustomers.push(o),null===(t=this.searchForm.get("customerIds"))||void 0===t||t.setValue(this.filteredCustomers)),e.chipInput.clear()}add(e){const t=(e.value||"").trim();t&&this.filteredSRNumbers.push(t),e.chipInput.clear()}removeSR(e){const t=this.filteredSRNumbers.indexOf(e);t>=0&&this.filteredSRNumbers.splice(t,1)}paginate(e){this.paginateData[0]=e.first,this.paginateData[1]=e.rows,this.paginateDataedit[0]=e.first,this.paginateDataedit[1]=e.rows,this.search()}exportCSV(){let e=this.searchForm.getRawValue();this.service.search({customerIds:this.filteredCustomers,srNumbers:this.filteredSRNumbers,mobile:e.mobile,priority:e.priority,requestFrom:e.requestFrom,requestTo:e.requestTo,serviceIds:e.serviceIds&&e.serviceIds.length>0?e.serviceIds:[],statusIds:e.statusIds&&e.statusIds.length>0?e.statusIds:[],zones:e.zones&&e.zones.length>0?e.zones:[],serviceForId:e.serviceForId}).subscribe(e=>{e&&e.data&&e.data.searchSRResult.length>0&&this.export(e.data.searchSRResult)})}export(e){let t=[];e.forEach(e=>{let o={"SR Number":e.enquiryId,"Customer ID":e.customerId,"Mobile Number":e.mobileNo,"Alt. Number":e.contactNo,"House No.":e.houseNo,Society:e.society,Area:e.area,Status:e.enquiryStatus,"Calling Remark":e.description,"Visit remark":e.delayReason,"Enquiry Date":null!=e.enquiryDate?this.service.Moment(e.enquiryDate).format("MM-DD-YYYY"):"","Preferred Date":null!=e.preferredDate?this.service.Moment(e.preferredDate).format("MM-DD-YYYY"):"","Gas Status":e.planName,Priority:e.priorityName};t.push(o)});let o=eo(Date.now()).format("DDMMYY");const s=jt.utils.book_new(),i=jt.utils.json_to_sheet(t);i["!cols"]=[{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:20},{wch:30},{wch:25},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}],jt.utils.book_append_sheet(s,i,"SRList"),jt.writeFile(s,"SRList "+o+".xlsx")}onChkChildChange(e,t){1==e.checked?this.getbulkSelect.push(this.serviceRequests.filter(e=>e.enquiryId==t)[0]):this.getbulkSelect.forEach((e,o)=>{e.enquiryId==t&&this.getbulkSelect.splice(o,1)}),this.isAllSelect=this.getbulkSelect.length==this.serviceRequests.length,console.log(this.getbulkSelect),console.log(this.isAllSelect)}onChkChildChange1(e){console.log(e.checked),1==e.checked?(this.getbulkSelect=[],this.isAllSelect=!0,this.serviceRequests.forEach(e=>{e.isSelect=!1,this.getbulkSelect.pop()}),setTimeout(()=>{this.serviceRequests.forEach(e=>{e.isSelect=!0,this.getbulkSelect.push(e)})},10)):(this.isAllSelect=!1,this.serviceRequests.forEach(e=>{e.isSelect=!1}),this.getbulkSelect=[]),console.log(this.getbulkSelect),console.log(this.serviceRequests)}Bulk_Upload(e){0!=this.getbulkSelect.length?this.dialog.open(Gt,{data:{enquiryData:this.getbulkSelect,type:e},width:"800px"}).afterClosed().subscribe(e=>{console.log(e),this.paginateData[0]=this.paginateDataedit[0],this.paginateData[1]=this.paginateDataedit[1],this.search()}):this.service.notify.showError("Please select Service in Service Request Details")}AssignmanpowerBulk(e){if(0!=this.getbulkSelect.length){let t=!0,o=!0,s=!0,i=!0,r=this.getbulkSelect[0].serviceId,n=this.getbulkSelect[0].cityId,a=4,l=6;this.getbulkSelect.forEach(e=>{t=r==e.serviceId,o=n==e.cityId,a!=e.enquiryStatusId&&l!=e.enquiryStatusId&&(s=!1),null==e.preferredDate&&(i=!1)}),console.log(t),console.log(o),console.log(s),t&&o&&s&&i?this.dialog.open(Xt,{data:{enquiryData:this.getbulkSelect,type:e}}).afterClosed().subscribe(e=>{console.log(e),this.paginateData[0]=this.paginateDataedit[0],this.paginateData[1]=this.paginateDataedit[1],this.search()}):i?t?o?s||this.service.notify.showError("Please check EnquiryStatus of Selected Srs"):this.service.notify.showError("Please select Single Zone Srs"):this.service.notify.showError("Please select Single ServiceType Srs"):this.service.notify.showError("Please Enter Preferred Date in SRs")}else this.service.notify.showError("Please select Service in Service Request Details")}searchbox(e){console.log(e),this.textsearch=e,this.search()}Assignmanpower(e){window.open(this.oldUrl+"/Account/LoginApp?page="+e+"&token="+this.authService.currentUserValue.token,"_blank")}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(Ht.f),b.Y36(w.e),b.Y36(a.GW),b.Y36(f.uw),b.Y36(s.Ye))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-srdashboard"]],viewQuery:function(e,t){if(1&e&&b.Gf(ro,5),2&e){let e;b.iGM(e=b.CRH())&&(t.customerId=e.first)}},decls:21,vars:22,consts:[["calss","serviceRequestsPage"],[1,"row"],[1,"col-12"],["header","Search","styleClass","searchDialog",3,"position","visible","modal","baseZIndex","draggable","resizable","visibleChange"],["class","formWrap",3,"formGroup","keydown.enter",4,"ngIf"],[1,"search"],[1,"searchHeader"],["class","criteria requestFormDataWrap",4,"ngIf"],[1,"btnWrap","mb-3","mt-2"],["matTooltip","Search","icon","pi pi-search",1,"cust-button",3,"click"],["matTooltip","Create Service Request","icon","pi pi-plus",1,"cust-button-primary",3,"click"],[1,"searchTable"],["class","btnWrap mb-3",4,"ngIf"],["sortMode","single",1,"",3,"value","columns","showCurrentPageReport","globalFilterFields","filterDelay","scrollable","rowHover"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","content-section implementation ",4,"ngIf"],[1,"formWrap",3,"formGroup","keydown.enter"],[1,"form-group"],["type","text","pInputText","","formControlName","srNumbers",1,"form-control","abc",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"ngClass"],["aria-label","Service Request Number"],["srChipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["type","text","pInputText","","formControlName","customerIds",1,"form-control","abc",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["aria-label","Customers"],["chipList",""],["mask","999-999-9999","formControlName","mobile"],["appendTo","body","formControlName","serviceIds","optionValue","keyName","optionLabel","displayText","placeholder","-Select-","placeholder","-Select-",1,"ui-input",3,"options"],["type","date","formControlName","requestFrom",1,"form-control"],["type","date","formControlName","requestTo",1,"form-control"],["appendTo","body","formControlName","zones","optionValue","keyName","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options"],["appendTo","body","formControlName","priority","optionValue","keyName","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options"],["appendTo","body","formControlName","statusIds","optionValue","keyName","optionLabel","displayText","placeholder","-Select-",1,"ui-input",3,"options"],[1,"btnWrap"],["type","button","mat-button","","color","secondary",3,"click"],["type","submit","mat-button","","color","primary",3,"click"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"criteria","requestFormDataWrap"],[1,"chipContainer"],["class","singleChip",3,"selectable","removable","removed",4,"ngFor","ngForOf"],[1,"singleChip",3,"selectable","removable","removed"],[1,"btnWrap","mb-3"],["matTooltip","Export to CSV","icon","pi pi-file-excel",1,"cust-button",3,"click"],["mat-button","","color","secondary",3,"click"],["pInputText","","type","text","placeholder","Search",1,"p-inputtext","p-component",3,"input"],[1,"searchTr"],[3,"checked","change"],["id","header",3,"pSortableColumn","click",4,"ngFor","ngForOf"],["id","header",3,"pSortableColumn","click"],[3,"field",4,"ngIf"],[3,"field"],["target","_blank",3,"routerLink"],[1,"pi","pi-phone",2,"cursor","pointer",3,"click"],[2,"overflow","auto"],["colspan","13"],[1,"content-section","implementation"],[3,"rows","totalRecords","rowsPerPageOptions","onPageChange"]],template:function(e,t){1&e&&(b.TgZ(0,"section",0),b.TgZ(1,"div",1),b.TgZ(2,"div",2),b.TgZ(3,"h1"),b._uU(4),b.qZA(),b.qZA(),b.qZA(),b.TgZ(5,"p-dialog",3),b.NdJ("visibleChange",function(e){return t.displayModal=e}),b.YNc(6,co,69,15,"form",4),b.qZA(),b.TgZ(7,"div",5),b.TgZ(8,"div",6),b.YNc(9,mo,7,1,"div",7),b.TgZ(10,"div",8),b.TgZ(11,"p-button",9),b.NdJ("click",function(){return t.showBasicDialog()}),b.qZA(),b.TgZ(12,"p-button",10),b.NdJ("click",function(){return t.addNewSR()}),b.qZA(),b.qZA(),b.qZA(),b.TgZ(13,"div",11),b.YNc(14,ho,9,0,"div",12),b.TgZ(15,"p-table",13,14),b.YNc(17,Zo,4,2,"ng-template",15),b.YNc(18,yo,33,18,"ng-template",16),b.YNc(19,fo,3,0,"ng-template",17),b.qZA(),b.YNc(20,bo,2,4,"div",18),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(4),b.hij("Service Requests (",t.totalRecords,")"),b.xp6(1),b.Akn(b.DdM(20,Co)),b.Q6J("position","right")("visible",t.displayModal)("modal",!0)("baseZIndex",-100)("draggable",!1)("resizable",!1),b.xp6(1),b.Q6J("ngIf",t.searchForm),b.xp6(3),b.Q6J("ngIf",t.displayArr.length>0),b.xp6(5),b.Q6J("ngIf",t.serviceRequests&&t.serviceRequests.length>0),b.xp6(1),b.Q6J("value",t.serviceRequests)("columns",t.cols)("showCurrentPageReport",!0)("globalFilterFields",b.DdM(21,wo))("filterDelay",0)("scrollable",!0)("rowHover",!0),b.xp6(5),b.Q6J("ngIf",t.totalRecords>10))},directives:[j.V,s.O5,he.zx,to.gM,P.iA,R.jx,r._Y,r.JL,a.w5,r.sg,r.Fj,oo.oH,a.x0,a.bf,r.JJ,r.u,s.mk,oo.qn,s.sg,S.vy,so.NU,X.Lt,I.lW,oo.HS,W.Hw,oo.qH,it.oG,P.lQ,P.fz,i.yS,io.D],styles:["tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:400px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:120px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:133px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:120px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7), tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(8), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(8){width:150px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(9), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(9){width:133px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(10), tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(11), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(10), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(11){width:200px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(12), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(12){width:120px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(13), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(13){width:133px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(14), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(14){width:120px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(15), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(15){width:85px}tr.searchTr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(16), tr.searchTr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(16){width:60px}"]}),e})()},{path:"request/:id",component:Rt}];let So=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({imports:[[i.Bz.forChild(Io)],i.Bz]}),e})();var Fo=o(2883),_o=o(8814),Mo=o(8598),xo=o(705);let Uo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({providers:[r.qu],imports:[[s.ez,So,Fo.q,_o.m,a.Ju,r.u5,r.UX,j.S,he.hJ,P.U$,io.U,so.q4,Mo._8,S.zz,xo.L$]]}),e})()}}]);